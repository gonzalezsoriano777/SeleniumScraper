webpackJsonp([77],{1711:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(1885),i=s(639);const o={SearchInput:n.default};t.controllerViews=o;const a={SearchInputStore:i.a};t.stores=a},1885:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),i=s.n(n),o=s(1),a=s.n(o),r=s(3),h=s.n(r),p=s(13),c=s.n(p),l=s(4),u=s.n(l),d=s(11),g=s(1615),m=s.n(g),f=s(20),S=s(33),I=s.n(S),C=s(2),x=s.n(C),b=s(648),y=s.n(b);const E=y()("SearchInput:getSuggestions");function T(e,t,s){E("getSuggestions",t);var n=(t=t||{}).searchTerm||"",i={searchTerm:n,gossipConfig:t.gossipConfig},o=t.instanceId||t.componentProps&&t.componentProps.id,a=Date.now();if(""===n)return e.dispatch("GET_SUGGESTIONS_SUCCESS",{instanceId:o,timeStamp:a,searchTerm:n,searchSuggestions:{hiConf:!1,items:[]}}),void s();e.service.read("searchassist",i,{},function(t,i){if(E("Search assist data",i),t||!i)return e.dispatch("GET_SUGGESTIONS_FAILURE",t),s(t,null);e.dispatch("GET_SUGGESTIONS_SUCCESS",{instanceId:o,timeStamp:a,searchTerm:n,searchSuggestions:i}),s()})}var v=s(633),B=s.n(v),H=h()({displayName:"MagnifyingGlass",autobind:!1,contextTypes:{theme:i.a.object},propTypes:{active:i.a.bool},render:function(){var e=this.context.theme,t=e?e.getIn(["search","style","magnifying_glass","color"],"#000"):"#000",s=u()("Pos(a) Z(2) T(7px) Start(14px)",{"D(n)":!this.props.active});return a.a.createElement("div",{className:s},a.a.createElement(d.Icon,{asset:B.a,height:"23",color:t}))}});const N=y()("SearchInput:setHighlightedSuggestion");function _(e,t,s){if(N("setHighlightedSuggestion",t),"number"==typeof(t=t||{}).index){var n=t.instanceId||t.componentProps&&t.componentProps.id;e.dispatch("SET_HIGHLIGHTED_SUGGESTION",{instanceId:n,index:t.index}),s()}else s()}const P=y()("SearchInput:setSelectedSuggestion");function D(e,t,s){if(P("setSelectedSuggestion",t),"number"==typeof(t=t||{}).index){var n=t.instanceId||t.componentProps&&t.componentProps.id;e.dispatch("SET_SELECTED_SUGGESTION",{instanceId:n,index:t.index}),s()}else s()}var w=s(639),k=h()({displayName:"SearchHintInput",autobind:!1,mixins:[I.a],statics:{storeListeners:[w.a]},propTypes:{className:i.a.string,instanceId:i.a.string.isRequired,searchTerm:i.a.string.isRequired,onSearchHintChanged:i.a.func},getInitialState:function(){return{previousSearchHint:"",searchHint:"",searchTerm:""}},componentWillMount:function(){this.onChange=this.onChange.bind(this),this.store=this.getStore(w.a)},componentWillReceiveProps:function(e){this.props.searchTerm!==e.searchTerm&&(this.state.previousSearchHint=this.state.searchHint,this.state.searchHint=""),this.state.searchTerm=e.searchTerm},onChange:function(e){var t,s="",n=this._getStoreData();n&&n.suggestions&&n.suggestions.length&&n.selectedSuggestionIndex<0&&(s=(t=n.suggestions[0]).isStrictMatch?t.fullSuggestion:""),this.state.searchHint=s,this.state.previousSearchHint!==this.state.searchHint&&this.props.onSearchHintChanged&&this.props.onSearchHintChanged(s)},render:function(){return a.a.createElement("input",{className:this.props.className,readOnly:!0,style:{WebkitAppearance:"none"},tabIndex:"-1",value:this.state.searchHint})},_getStoreData:function(){return{selectedSuggestionIndex:this.store.getSelectedSuggestionIndex(this.props.instanceId),suggestions:this.store.getSuggestions(this.props.instanceId)}}}),O=s(1886),U=s.n(O),G=s(1596),M=h()({displayName:"SearchSuggestionTemplate",autobind:!1,propTypes:{suggestion:i.a.object},mixins:[G.a]}),F=h()({displayName:"SearchSuggestionItem",autobind:!1,propTypes:{index:i.a.number,isSelected:i.a.bool,isSmartphone:i.a.bool,onSelect:i.a.func,onEnter:i.a.func,onExit:i.a.func,suggestion:i.a.object,templateComponent:i.a.func,termCompleteBtn:i.a.bool,termCompleteHandler:i.a.func},mixins:[I.a],componentWillMount:function(){this.handleTermComplete=this.handleTermComplete.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.handleItemEnter=this.handleItemEnter.bind(this),this.handleItemExit=this.handleItemExit.bind(this)},getTermCompleteBtn:function(){if(this.props.termCompleteBtn&&!this.props.templateComponent){var e={cpos:this.props.index,elm:"btn",itc:0,slk:"srch-asst-complete",subsec:"search"};return a.a.createElement(f.I13nButton,{className:"Pos(a) W(36px) H(100%) End(0) T(0) P(0) Bdw(0) Bgc(t) O(0) Cur(p)",model:e,onClick:this.handleTermComplete,type:"button"},a.a.createElement(d.Icon,{asset:U.a,className:"Rotate(-45deg)",height:"28",color:"#ccc"}))}},handleItemClick:function(e){var t=this,s=t.props.suggestion,n=f.ReactI13n.getInstance();n?n.execute("beacon",{beaconType:"beaconClick",arguments:["uh","srch-asst",0,{cpos:t.props.index,elm:"btn",itc:0,subsec:"search",tar:"search.yahoo.com",tar_uri:"/search"}]},function(){t.props.onSelect&&t.props.onSelect(s)}):t.props.onSelect&&t.props.onSelect(s)},handleItemEnter:function(e){this.props.onEnter&&this.props.onEnter(this.props.index)},handleItemExit:function(e){this.props.onExit&&this.props.onExit(this.props.index)},handleTermComplete:function(e){e.preventDefault(),e.stopPropagation(),this.props.termCompleteHandler&&this.props.termCompleteHandler(this.props.index)},render:function(){var e=u()("D(b) Td(n) Cur(d)",{"Mend(36px)":!this.props.templateComponent}),t=u()("Pos(r) Fz(15px)! Cur(p)",{"Bgc(#c6d7ff)":this.props.isSelected,"Bd Bdc(#f1f1f1) Bdw(0) Bdbw(1px) Py(10px) Px(20px)":this.props.isSmartphone,"Py(4px) Px(10px)":!this.props.isSmartphone}),s=this.props.templateComponent||M;return a.a.createElement("li",{className:t,onClick:this.handleItemClick,onMouseEnter:this.handleItemEnter,onMouseLeave:this.handleItemExit},this.getTermCompleteBtn(),a.a.createElement("div",{className:e},a.a.createElement(s,{suggestion:this.props.suggestion})))}}),A=h()({displayName:"SearchSuggestionList",autobind:!1,propTypes:{footerComponent:i.a.func,isSmartphone:i.a.bool,instanceId:i.a.string.isRequired,onSelect:i.a.func,onItemEnter:i.a.func,onItemExit:i.a.func,showFooter:i.a.bool,termCompleteBtn:i.a.bool,termCompleteHandler:i.a.func,templateComponent:i.a.func},contextTypes:{getStore:i.a.func},mixins:[I.a],statics:{storeListeners:[w.a]},getInitialState:function(){return{highlightedSuggestionIndex:-1,selectedSuggestionIndex:-1,suggestions:[]}},componentWillMount:function(){this.onChange=this.onChange.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.handleItemEnter=this.handleItemEnter.bind(this),this.handleItemExit=this.handleItemExit.bind(this),this.handleTermComplete=this.handleTermComplete.bind(this),this.store=this.getStore(w.a)},onChange:function(e){this.setState(this._getStoreData())},handleItemClick:function(e){this.props.onSelect&&this.props.onSelect(e)},handleItemEnter:function(e){this.props.onItemEnter&&this.props.onItemEnter(e)},handleItemExit:function(e){this.props.onItemExit&&this.props.onItemExit(e)},handleTermComplete:function(e){this.props.termCompleteHandler&&this.props.termCompleteHandler(e)},renderFooter:function(){var e=this.props,t=e.footerComponent;return!0===e.showFooter&&t?a.a.createElement(t,{query:e.query}):null},render:function(){var e=this,t=u()("Pos(a) Ta(start) Start(0) End(0) Bgc(#fff) Z(1) Wob(ba)",{"D(n)":!e.state.suggestions.length,"Bd Bdc(#aaa) Bdtw(0) Mt(-1px) Whs(n)":!e.props.isSmartphone,"Mt(11px)":e.props.isSmartphone});return a.a.createElement("div",{className:t,key:"satray"},a.a.createElement("ul",{className:"M(0)"},e.state.suggestions.map(function(t,s){var n=e.state.selectedSuggestionIndex===s||e.state.highlightedSuggestionIndex===s;return a.a.createElement(F,{index:s,isSmartphone:e.props.isSmartphone,key:s,isSelected:n,onSelect:e.handleItemClick,onEnter:e.handleItemEnter,onExit:e.handleItemExit,suggestion:t,templateComponent:e.props.templateComponent,termCompleteBtn:e.props.termCompleteBtn,termCompleteHandler:e.handleTermComplete})})),e.renderFooter())},_getStoreData:function(){return{highlightedSuggestionIndex:this.store.getHighlightedSuggestionIndex(this.props.instanceId),selectedSuggestionIndex:this.store.getSelectedSuggestionIndex(this.props.instanceId),suggestions:this.store.getSuggestions(this.props.instanceId)}}}),W=(s(119),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}),K=h()({displayName:"SearchInput",autobind:!1,_isSmartphone:!1,_isTablet:!1,propTypes:{autofocus:i.a.bool.isRequired,className:i.a.string,defaultValue:i.a.string,enableFocusBeacon:i.a.bool,footerComponent:i.a.func,id:i.a.string.isRequired,inputName:i.a.string,isSmartphone:i.a.bool,isTablet:i.a.bool,magnifyingGlass:i.a.bool,onClear:i.a.func,onFocus:i.a.func,onKeyDown:i.a.func,onSearchHintChanged:i.a.func,onSelect:i.a.func,onValueChange:i.a.func,placeholder:i.a.string,searchHint:i.a.bool,showFooter:i.a.bool,templateComponent:i.a.func},contextTypes:{getStore:i.a.func,theme:i.a.object,session:i.a.object},childContexTypes:{theme:i.a.object},mixins:[I.a],statics:{storeListeners:[w.a]},immediateId:null,getInitialState:function(){return this.isOnComposition=!1,{searchTerm:"",highlightedSuggestionIndex:-1,selectedSuggestionIndex:-1,shouldCleanQuery:!1,suggestions:[]}},getDefaultProps:()=>({config:{}}),componentDidMount:function(){var e=this;e.props.autofocus&&(e.immediateId=setImmediate(function(){e.focus()}))},componentWillMount:function(){this.onChange=this.onChange.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleChange=this.handleChange.bind(this),this.handleComposition=this.handleComposition.bind(this),this.handleClear=this.handleClear.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleItemEnter=this.handleItemEnter.bind(this),this.handleItemExit=this.handleItemExit.bind(this),this.handleTermComplete=this.handleTermComplete.bind(this),this.store=this.getStore(w.a),this.sendFocusBeacon=this.sendFocusBeacon.bind(this),this._isSmartphone=this.props.isSmartphone||!1!==this.props.isSmartphone&&"smartphone"===x()(this.context,["session","dimensions","device"]),this._isTablet=this.props.isTablet||!1!==this.props.isTablet&&"tablet"===x()(this.context,["session","dimensions","device"])},componentWillUnmount:function(){this.immediateId&&clearImmediate(this.immediateId)},focus:function(){var e=c.a.findDOMNode(this.refs.userInput),t=this.getUserInput().length;e.focus(),e.setSelectionRange&&e.setSelectionRange(t,t)},sendFocusBeacon:function(){var e=f.ReactI13n.getInstance();e&&e.execute("beacon",{beaconType:"beaconClick",arguments:["uh","srch-fcs",0,{elm:"itm",itc:1,subsec:"search"}]})},blur:function(){c.a.findDOMNode(this.refs.userInput).blur()},handleValueChange:function(e){e?this._isSmartphone&&this.props.onFocus&&this.props.onFocus():this._isSmartphone&&this.props.onClear&&this.props.onClear()},setUserInput:function(e,t){c.a.findDOMNode(this.refs.userInput).value=e,this.handleValueChange(e),!0===t&&this.focus()},getUserInput:function(){var e=c.a.findDOMNode(this.refs.userInput);return e&&e.value||""},getClearBtn:function(){if(this.props.clearBtn&&this.state.searchTerm)return a.a.createElement(f.I13nButton,{className:"Pos(a) W(36px) H(100%) End(0) T(0) P(0) Bdw(0) Bgc(t) O(0) Z(3) Cur(p)",model:{elm:"btn",itc:0,slk:"srch-clear",subsec:"search"},onClick:this.handleClear,type:"button"},a.a.createElement(d.Icon,W({asset:m.a,height:12,color:"#ccc"},{style:{verticalAlign:"initial"}})))},getSearchHintInput:function(){var e={"Fz(18px) Pos(a) W(100%) T(0) Start(0) M(0) C(#c0c0c0) Bgc(#fff) O(0) O(0):f Px(10px) Py(5px) Z(1)":!0,"Bxsh(n) Bxsh(n):f":!0,"Bdrs(0)":!this.props.magnifyingGlass,"Bdrs(3px) Bdw(0)":this._isSmartphone||this._isTablet};if(this.props.className&&(e[this.props.className]=!0),this.props.searchHint)return a.a.createElement(k,{className:u()(e),instanceId:this.props.id,searchTerm:this.state.searchTerm,onSearchHintChanged:this.props.onSearchHintChanged})},getMaginifyingGlass:function(){return a.a.createElement(H,{active:this.props.magnifyingGlass})},getSuggestions:function(e){"number"==typeof this._getSuggestionsTimeoutID&&(clearTimeout(this._getSuggestionsTimeoutID),this._getSuggestionsTimeoutID=void 0);var t=this;this._getSuggestionsTimeoutID=setTimeout(function(e,s){t.context.executeAction(T,{searchTerm:e,gossipConfig:t.props.config.gossip,instanceId:s})}.bind(t,e,t.props.id),200)},resetSuggestions:function(){this.getSuggestions("")},onChange:function(e){var t=this;t.setState(t._getStoreData(),function(){if(t.state.suggestions&&t.state.selectedSuggestionIndex>-1){var e=t.state.suggestions[t.state.selectedSuggestionIndex]&&t.state.suggestions[t.state.selectedSuggestionIndex].fullSuggestion||"";-1===t.state.highlightedSuggestionIndex&&(t.props.searchHint&&t.props.onSearchHintChanged&&t.props.onSearchHintChanged(e),t.setUserInput(e))}}),t.props.onValueChange&&t.props.onValueChange(t.state.searchTerm)},handleChange:function(e){var t=e.target.value;this.props.enableFocusBeacon&&!this.state.searchTerm&&1===t.length&&this.sendFocusBeacon(),this.setState({searchTerm:t}),this.getSuggestions(t)},handleKeyDown:function(e){var t=this,s=f.ReactI13n.getInstance();if(t.props.onKeyDown&&t.props.onKeyDown(e),"ArrowDown"===e.key){if(t.isOnComposition)return;t.state.selectedSuggestionIndex+1<t.state.suggestions.length&&t.context.executeAction(D,{index:t.state.selectedSuggestionIndex+1,instanceId:t.props.id}),e.preventDefault()}else if("ArrowUp"===e.key){if(t.isOnComposition)return;t.state.selectedSuggestionIndex-1>-1?t.context.executeAction(D,{index:t.state.selectedSuggestionIndex-1,instanceId:t.props.id}):0===t.state.selectedSuggestionIndex&&t.setUserInput(t.state.searchTerm),e.preventDefault()}else if("Escape"===e.key)t.resetSuggestions();else if("Enter"===e.key){e.preventDefault(),t.resetSuggestions();var n=229!==e.which&&!t.isOnComposition,i={source:t.state.selectedSuggestionIndex>-1?"sa":"sb"};s?s.execute("beacon",{beaconType:"beaconClick",arguments:["uh","srch-enter",0,{elm:"kybrd",itc:0,subsec:"search",tar:"search.yahoo.com",tar_uri:"/search"}]},function(){n&&t.props.onSelect&&t.props.onSelect(i)}):n&&t.props.onSelect&&t.props.onSelect(i)}else 32!==e.keyCode||t.getUserInput().length||t.blur()},handleKeyUp:function(){this.handleValueChange(this.getUserInput())},handleBlur:function(e){this._isSmartphone||this._isTablet||this.resetSuggestions()},handleComposition:function(e){"compositionend"===e.type?(this.isOnComposition=!1,this.handleChange(e)):this.isOnComposition=!0},clearInput:function(){this.setState({searchTerm:""}),this.setUserInput(""),this.resetSuggestions()},handleClear:function(e){this.clearInput(),this.focus()},handleSelect:function(e){var t={source:this.state.selectedSuggestionIndex>-1?"sa":"sb"};this.setUserInput(e.fullSuggestion),this.resetSuggestions(),this.props.onSelect&&this.props.onSelect(t)},handleItemEnter:function(e){this.context.executeAction(_,{index:e,instanceId:this.props.id})},handleItemExit:function(e){this.context.executeAction(_,{index:-1,instanceId:this.props.id})},handleTermComplete:function(e){var t=this.state.suggestions[e].fullSuggestion;this.setState({searchTerm:t}),this.setUserInput(t),this.getSuggestions(t),this.focus()},shouldComponentUpdate:function(e,t){return t.searchTerm!==this.state.searchTerm||t.highlightedSuggestionIndex!==this.state.highlightedSuggestionIndex||t.selectedSuggestionIndex!==this.state.selectedSuggestionIndex||t.suggestions!==this.state.suggestions||t.shouldCleanQuery!==this.state.shouldCleanQuery},render:function(){var e=this.context.session.isLightWeightBrowser,t=this.props.defaultValue||this.getStore(w.a).state.query,s=this._isSmartphone||this._isTablet,n=u()("Z(2)",{"Pos(r)":!s}),i=u()({"Pos(r)":s}),o={"Pos(r) W(100%) M(0) O(0) O(0):f Bgc(#fff) Z(2) Bxsh(n) Bxsh(n):f Fz(15px) Px(15px) Py(8px)":!0,"Bgc(t)":this.props.searchHint,"Bdrs(0)":!this.props.magnifyingGlass,"Pend(0px)":e,"Pstart(10px)":!this.props.magnifyingGlass&&!e,"Pend(10px)":!this.props.clearBtn&&!e,"Pstart(40px)":this.props.magnifyingGlass&&!e&&!s,"Pstart(50px)":this.props.magnifyingGlass&&!e&&s,"Pend(38px)":this.props.clearBtn&&!e,"Bdrs(3px) Bdw(0) Fz(18px)":s};this.props.className&&(o[this.props.className]=!0);var r={WebkitAppearance:"none"};return e?a.a.createElement("div",{className:n,id:this.props.id},a.a.createElement("div",{className:i},a.a.createElement("input",{"aria-label":"Search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",className:u()(o),defaultValue:t,key:"userInput",name:this.props.inputName,placeholder:this.props.placeholder,ref:"userInput",style:r,type:"text"}))):a.a.createElement("div",{className:n,id:this.props.id,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp},a.a.createElement("div",{className:i},a.a.createElement("input",{"aria-label":"Search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",className:u()(o),defaultValue:t,key:"userInput"+(this.state.shouldCleanQuery?"-cq":""),name:this.props.inputName,onChange:this.handleChange,onCompositionStart:this.handleComposition,onCompositionUpdate:this.handleComposition,onCompositionEnd:this.handleComposition,placeholder:this.props.placeholder,ref:"userInput",style:r,type:"text"}),this.props.magnifyingGlass&&this.getMaginifyingGlass(),this.getSearchHintInput(),this.getClearBtn()),a.a.createElement(A,{footerComponent:this.props.footerComponent,instanceId:this.props.id,isSmartphone:this._isSmartphone,onSelect:this.handleSelect,onItemEnter:this.handleItemEnter,onItemExit:this.handleItemExit,query:this.state.searchTerm,showFooter:this.props.showFooter,termCompleteBtn:this.props.termCompleteBtn,termCompleteHandler:this.handleTermComplete,templateComponent:this.props.templateComponent}))},_getStoreData:function(){return{highlightedSuggestionIndex:this.store.getHighlightedSuggestionIndex(this.props.id),selectedSuggestionIndex:this.store.getSelectedSuggestionIndex(this.props.id),shouldCleanQuery:this.store.state.shouldCleanQuery,suggestions:this.store.getSuggestions(this.props.id)}}});t.default=K},1886:function(e,t){if(void 0===s)var s={};s.ActionAssistArrow={name:"ActionAssistArrow",height:96,width:96,path:"M67.8 39.797L48.002 20 28.198 39.797c-1.56 1.562-1.56 4.094 0 5.656 1.562 1.562 4.102 1.562 5.66 0l10.14-10.14V76h8V35.31l10.145 10.144c1.562 1.562 4.094 1.562 5.656 0s1.56-4.095 0-5.657z"},void 0!==e&&e.exports&&(e.exports=s.ActionAssistArrow)}});