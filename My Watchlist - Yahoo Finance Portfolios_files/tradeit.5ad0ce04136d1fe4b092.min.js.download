/*! Finance Tradeit 0.3.7 Copyright 2018 Oath Holdings, Inc. */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://s.yimg.com/uc/finance/dd-site/",n(n.s=57)}([function(e,t,n){var r=n(25),o=n(13);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(r.default,e,t)};var r=a(n(24)),o=a(n(55));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){if(void 0===r)var r={};r["chain-link"]={name:"chain-link",height:24,width:24,path:"M8.078 19.392c-1.21 1.21-3.194 1.17-4.354-.117-1.087-1.207-.917-3.097.23-4.246l4.83-4.83c1.173-1.172 3.072-1.172 4.244 0 .39.39 1.023.39 1.414 0 .39-.39.39-1.024 0-1.415-1.953-1.952-5.118-1.952-7.07 0l-4.8 4.798C.727 15.43.43 18.43 2.093 20.443c1.906 2.31 5.333 2.43 7.4.363l1.414-1.414c.39-.39.39-1.024 0-1.414-.39-.39-1.023-.39-1.414 0l-1.414 1.414zm12.364-17.3C18.43.427 15.43.726 13.582 2.57l-1.26 1.264c-.392.39-.392 1.023 0 1.414.39.39 1.022.39 1.413 0l1.294-1.295c1.148-1.148 3.038-1.318 4.245-.23 1.287 1.16 1.326 3.144.117 4.353l-4.95 4.95c-1.172 1.172-3.07 1.172-4.243 0-.39-.39-1.024-.39-1.415 0-.39.39-.39 1.024 0 1.414 1.953 1.953 5.12 1.953 7.07 0l4.95-4.95c2.068-2.067 1.947-5.494-.363-7.4z"},e.exports&&(e.exports=r["chain-link"])},function(e,t,n){var r=n(9),o=n(26),a=n(27),i="[object Null]",s="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:i:c&&c in Object(e)?o(e):a(e)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=void 0;var r,o=n(49),a=(r=o)&&r.__esModule?r:{default:r};var i="function"==typeof Symbol;function s(e){return i&&"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){return s(e)?(0,a.default)(e):e},t.isAsync=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t|=0;for(var n=Math.max(e.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=e[t+o];return r},e.exports=t.default},function(e,t,n){var r=n(10).Symbol;e.exports=r},function(e,t,n){var r=n(11),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(4))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}},e.exports=t.default},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}},e.exports=t.default},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||l||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e){e.exports={ACCOUNT_LOGIN:"Account needs to be refreshed",ACCOUNT_LOGIN_MSG:"You need to log in into your broker account to continue trading.",ACCOUNT_REFRESH:"Account needs to be refreshed",ACCOUNT_REFRESH_MSG:"Your account needs to be refreshed to continue trading.",ACTION:"Action",ALL_BROKERS:"ALL BROKERS",ALL_ORDERS:"All Orders - {broker} ({account})",AUTHENTICATING:"Authenticating",BROKER_FEE:"Broker Fee",BROKERAGE_ACCOUNT:"Account",BUY_CLOSE:"Buy close",BUY_OPEN:"Buy open",BUY_SHARES_TITLE:"Buy Shares for {ticker} - {companyName}",BUY_TO_COVER:"Buy to cover",BUY_WRITES:"Buy writes",BUY:"Buy",BUYING_POWER:"Buying Power: {amount} {currency}",CANCEL:"Cancel",CANCEL_ORDER_FAILED:"Cancellation failed",CANCELED:"Canceled",CASH:"Cash",CHAIN_ICON_LEGEND:"Indicates linked account with this broker",CHANGE:"Change",CLOSE:"Close",COMBO:"Combo",CONTINUE:"Continue",DAY:"Day",DELAYED_LINK_MSG:"Your {broker} Accounts would be linked after one or two business days.",DISCLAIMER_MSG:"By clicking Continue, I agree to the",DONE:"Done",EDIT_ORDER:"Edit Order",EQUITY_OR_ETF:"Equity/ETF",ERR_API_ALL_ORDER_STATUS:"Could not retrieve your orders. Please Try Again.",ERR_API_AUTHENTICATE:"Could not authenticate your broker account. Please Try Again.",ERR_API_CANCEL_ORDER:"Could not cancel your order {orderId}. Please Try Again.",ERR_API_CLOSE_SESSION:"Could not unlink your account. Please Try Again.",ERR_API_GET_BROKER_LIST:"Could not fetch Broker List. Please Try Again.",ERR_API_OAUTH_ACCESS_LOGIN:"Could not connect to your broker. Please Try Again.",ERR_API_OAUTH_ACCESS_TOKEN:"Could not link your broker account(s). Please Try Again.",ERR_API_PLACE_TRADE:"Could not submit your {action} order for {ticker}. Please Try Again.",ERR_API_PORTFOLIO:"Could not fetch your Linked Accounts. Please Try Again.",ERR_API_PREVIEW_TRADE:"Could not create your {action} order for {ticker}. Please Try Again.",ERR_API_SECURITY_QUESTION:"Could not submit your response to the security question. Please Try Again.",ERR_SELECT_BROKER:"Error happened while selecting broker. Please Try Again.",ERR_INVALID_PRICE:"Please enter a valid price",ERR_INVALID_SHARES:"Please enter a valid number of shares",ESTIMATED_ORDER_COST:"Estimated Cost",ESTIMATED_ORDER_PROCEEDS:"Estimated Proceeds",ESTIMATED_TOTAL_COST:"Estimated Total Cost",ESTIMATED_TOTAL_PROCEEDS:"Estimated Total Proceeds",EXPAND_COLLAPSE:"Expand/Collapse all",EXPIRATION:"Expiration",EXPIRED:"Expired",FETCHING_BROKER_LIST:"Fetching list of brokers",FETCHING_LINKED_ACCOUNTS:"Fetching your linked accounts",FETCHING_ORDERS:"Fetching your orders",FILL_OR_KILL:"Fill or Kill",FILLED_EXECUTION:"Filled Execution",FILLED_QUANTITY:"Filled Quantity",FILLED:"Filled",FIXED_INCOME:"Fixed Income",GET_FINANCE_APP:"Get the Yahoo Finance App",GO_TO_PORTFOLIO:"Go to Portfolio",GOOD_FOR_THE_DAY:"Good for the day",GOOD_FOR_DAY:"Good for day",GOOD_THROUGH_DATE:"Good through day",GROUP_CLOSED:"Group Closed",GROUP_OPEN:"Group Open",GROUP_ORDER_ID:"Group Order no.",GROUP_ORDER_TYPE:"Group Order type",GTC:"Good till Cancelled",IMMEDIATE_OR_CANCEL:"Immediate or Cancel",INSTR_QUOTETYPE_EQUITY:"Stock",INSTR_QUOTETYPE_CRYPTOCURRENCY:"Cryptocurrency",INVALID_SESSION:"Invalid Session",LEARN_MORE:"Learn More",LIMIT_PRICE:"Limit Price",LIMIT:"Limit",LINK_ANOTHER_BROKER:"Link another Broker",LINK_BROKER_WELCOME_MSG:"See all your accounts in one place. Trade quickly and easily with any US broker.",LINK_BROKER_WELCOME_TITLE:"Link your real broker and start trading",LINKED_BROKER_ACCOUNTS:"LINKED BROKER ACCOUNTS",LINKING_ACCOUNT:"Linking your account",LOGIN_BROKER:"Log in into {broker}",LOGIN_BROKER_DEF:"Log in into Broker",LOGIN_WINDOW_CLOSED:"Login window was closed, you have to log in to into your broker to continue trading",MARGIN_CASH:"Margin Cash: {amount} {currency}",MARGIN:"Margin",MARKET:"Market",MAYBE_LATER:"Maybe Later",MULTILEG:"Multi leg",MUTUAL_FUNDS:"Mutual funds",NET_DEBIT:"Net Debit",NEVER_STORE_MSG:"Yahoo never stores your broker credentials",NO_OF_SHARES:"No. of shares",NOT_FOUND:"NOT FOUND",ONE_CANCELS_ALL:"One cancels all",ONE_TRIGGERS_ALL:"One triggers all",ONE_TRIGGERS_OCO:"One triggers one cancel other orders",OPEN:"Open",OPTION:"Option",ORDER_ACTION_BUY:"Bought",ORDER_ACTION_BUY_OPEN:"Bought to open",ORDER_ACTION_BUY_CLOSE:"Bought to close",ORDER_ACTION_BUY_TO_COVER:"Bought to cover",ORDER_ACTION_SELL:"Sold",ORDER_ACTION_SELL_OPEN:"Sold to open",ORDER_ACTION_SELL_CLOSE:"Sold to close",ORDER_ACTION_SELL_SHORT:"Sold short",ORDER_CANCEL_MSG:"Your order {orderId} for {broker} ({account}) was cancelled successfully.",ORDER_NUMBER:"Order Number",ORDER_PRICE:"Order Price",ORDER_MSG_MARKET:"{action} {quantity} shares at market price",ORDER_MSG_LIMIT:"{action} {quantity} shares at a limit price of {limitPrice} {currency}",ORDER_MSG_STOP:"{action} {quantity} shares at market price with a stop at {stopPrice} {currency}",ORDER_MSG_STOP_LIMIT:"{action} {quantity} shares at a limit price of {limitPrice} {currency} with a stop at {stopPrice} {currency}",ORDER_MSG_TRAILING_STOP_DOLLAR:"{action} {quantity} shares at market price {trailingAction}",ORDER_MSG_TRAILING_STOP_PRCT:"{action} {quantity} shares at market price {trailingAction}",ORDER_SUBMITTED_MSG:"Your order message {orderId} to {action} {noOfShares} shares of {ticker} at market price has been succesfully transmitted to {broker} at {time}",ORDER_SUBMITTED:"Your order was submitted",ORDER_TRAILING_BUY_ACTION:"if price rises by {amount}",ORDER_TRAILING_SELL_ACTION:"if price drops by {amount}",ORDER_TYPE:"Order Type",ORDERED_QUANTITY:"Ordered Quantity",ORDERS:"Orders",PART_FILLED:"Partially Filled",PENDING_CANCEL:"Pending Cancel",PENDING:"Pending",PRICE_NOTICE:"{exchange} Pricing Data ({currency}) {time}",PRIVACY:"Privacy",QUESTION:"Question",REFRESH:"Refresh",REJECTED:"Rejected",REVIEW_ORDER_TITLE:"Review your order",REVIEW_ORDER:"Review Order",REVIEWING_ORDER:"Reviewing your order",SECURITY_BROKER:"{broker} Identity Verification",SECURITY_SUBTITLE:"Answer the security questions that you have set in your broker portal to proceed",SELECT_ACCOUNT_TRADING:"Select an account for trading",SELECT_BROKER:"Select a Broker",SELL_CLOSE:"Sell close",SELL_OPEN:"Sell open",SELL_SHARES_TITLE:"Sell Shares for {ticker} - {companyName}",SELL_SHORT:"Sell short",SELL:"Sell",SOMETHING_WENT_WRONG:"Oops! Something went wrong.",SPONSORED_BROKERS:"SPONSORED BROKERS",SPREADS:"Spreads",STOCKS_OWNED:"Stocks owned: {amount}",STOCK_PRICE:"Stock Price",STOP_LIMIT:"Stop Limit",STOP_PRICE:"Stop Price",STOP:"Stop",SUBMIT_ORDER:"Submit Order",SUBMITING_ORDER:"Submitting your order",SUBMIT:"Submit",SUCCESS_LINK_MSG:"You have successfully connected your {broker} Accounts",SUCCESS_LINK:"Successfully Linked",SYMBOL:"Symbol",TERMS:"Terms",TRAIL_PRICE:"Trail Price",TRAILING_STOP_DOLLAR:"Trailing Stop Dollar",TRAILING_STOP_PRCT:"Trailing Stop Percent",TRY_AGAIN:"Try Again",TYPE:"Type",UNIT_PRICE_MSG:"{quantity} shares at price of {price} {currency}",UNKNOWN:"Unknown",UNLINK_ACCOUNT_SUCCESS:"Account Unlinked",UNLINK_ACCOUNT_SUCCESS_MSG:"Your account has been successfully unlinked.",UNLINKING_ACCOUNT:"Unlinking your account",UNSUPPORTED_ACCOUNT:"Unsupported Account",UNSUPPORTED_ACCOUNT_MSG:"The selected account {broker} ({accountName}) does not support {instrument} trading. Please select another account.",VIEW_ORDER_STATUS:"View Order Status",YAHOO_LOGIN_MSG:"Please try logging into your Yahoo Account.",YAHOO_PRIVACY_POLICY:"Yahoo Privacy Policy",YOUR_ANSWER:"Your Answer"}},function(e,t,n){if(void 0===r)var r={};r.checkmark={name:"checkmark",height:48,width:48,path:"M44.414 13.566c.78-.78.78-2.047 0-2.828-.78-.78-2.047-.78-2.826 0L18.98 33.344 8.374 22.738c-.78-.78-2.048-.78-2.828 0-.78.78-.78 2.047 0 2.828L18.98 39l25.434-25.434z"},e.exports&&(e.exports=r.checkmark)},function(e,t,n){if(void 0===r)var r={};r["caret-down"]={name:"caret-down",height:48,width:48,path:"M24.21 33.173l12.727-12.728c.78-.78.78-2.048 0-2.828-.78-.78-2.047-.78-2.828 0l-9.9 9.9-9.9-9.9c-.78-.78-2.047-.78-2.827 0-.78.78-.78 2.047 0 2.828L24.21 33.173z"},e.exports&&(e.exports=r["caret-down"])},function(e,t,n){if(void 0===r)var r={};r["caret-right-finance"]={name:"caret-right-finance",height:48,width:48,path:"M20.95 9.774c-.966-1.025-2.694-1.023-3.67 0-.98 1.032-.98 2.71 0 3.74l8.95 9.412-8.946 9.404c-.983 1.036-.98 2.716 0 3.74.49.514 1.14.796 1.837.796.698 0 1.35-.28 1.834-.795l12.5-13.145L20.95 9.775z"},e.exports&&(e.exports=r["caret-right-finance"])},function(e,t,n){if(void 0===r)var r={};r.code={name:"code",height:32,width:32,path:"M11.608 7.058c-.523-.523-1.368-.523-1.89 0l-7.994 7.996c-.52.523-.52 1.368 0 1.89l7.995 7.997c.26.262.602.393.943.393.343 0 .684-.13.945-.392.523-.52.523-1.367 0-1.89L4.56 16l7.048-7.052c.523-.523.523-1.368 0-1.89zm18.667 7.997L22.282 7.06c-.523-.524-1.368-.524-1.89 0-.522.522-.522 1.367 0 1.89L27.44 16l-7.05 7.052c-.52.523-.52 1.368 0 1.89.262.262.605.393.946.393.343 0 .684-.13.945-.392l7.994-7.996c.523-.523.523-1.368 0-1.89z"},e.exports&&(e.exports=r.code)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){((0,r.default)(e)?p:h)(e,(0,l.default)(t),n)};var r=d(n(0)),o=d(n(14)),a=d(n(28)),i=d(n(54)),s=d(n(5)),c=d(n(15)),u=d(n(17)),l=d(n(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){n=(0,c.default)(n||s.default);var r=0,a=0,i=e.length;function l(e,t){e?n(e):++a!==i&&t!==o.default||n(null)}for(0===i&&n(null);r<i;r++)t(e[r],r,(0,u.default)(l))}var h=(0,i.default)(a.default,1/0);e.exports=t.default},function(e,t,n){var r=n(3),o=n(12),a="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==i||t==s||t==a||t==c}},function(e,t,n){var r=n(9),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[s]=n:delete e[s]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){(0,r.default)(t)(e,(0,o.default)(n),a)};var r=a(n(29)),o=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,c){if(c=(0,o.default)(c||r.default),e<=0||!t)return c(null);var u=(0,a.default)(t),l=!1,d=0,p=!1;function h(e,t){if(d-=1,e)l=!0,c(e);else{if(t===s.default||l&&d<=0)return l=!0,c(null);p||m()}}function m(){for(p=!0;d<e&&!l;){var t=u();if(null===t)return l=!0,void(d<=0&&c(null));d+=1,n(t.value,t.key,(0,i.default)(h))}p=!1}m()}};var r=c(n(5)),o=c(n(15)),a=c(n(30)),i=c(n(17)),s=c(n(14));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,r.default)(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t=(0,o.default)(e);return t?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(t):(n=e,i=(0,a.default)(n),s=-1,c=i.length,function(){var e=i[++s];return s<c?{value:n[e],key:e}:null});var n,i,s,c};var r=i(n(0)),o=i(n(31)),a=i(n(32));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r&&e[r]&&e[r]()};var r="function"==typeof Symbol&&Symbol.iterator;e.exports=t.default},function(e,t,n){var r=n(33),o=n(45),a=n(0);e.exports=function(e){return a(e)?r(e):o(e)}},function(e,t,n){var r=n(34),o=n(35),a=n(37),i=n(38),s=n(40),c=n(41),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),l=!n&&o(e),d=!n&&!l&&i(e),p=!n&&!l&&!d&&c(e),h=n||l||d||p,m=h?r(e.length,String):[],f=m.length;for(var b in e)!t&&!u.call(e,b)||h&&("length"==b||d&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,f))||m.push(b);return m}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(36),o=n(6),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){var r=n(3),o=n(6),a="[object Arguments]";e.exports=function(e){return o(e)&&r(e)==a}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var r=n(10),o=n(39),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,n(16)(e))},function(e,t){e.exports=function(){return!1}},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?n:t)&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(42),o=n(43),a=n(44),i=a&&a.isTypedArray,s=i?o(i):r;e.exports=s},function(e,t,n){var r=n(3),o=n(13),a=n(6),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(11),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}).call(this,n(16)(e))},function(e,t,n){var r=n(46),o=n(47),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(48)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(function(t,n){var o;try{o=e.apply(this,t)}catch(e){return n(e)}(0,r.default)(o)&&"function"==typeof o.then?o.then(function(e){s(n,null,e)},function(e){s(n,e.message?e:new Error(e))}):n(null,o)})};var r=i(n(12)),o=i(n(50)),a=i(n(51));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){try{e(t,n)}catch(e){(0,a.default)(c,e)}}function c(e){throw e}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,a.default)(arguments),n=t.pop();e.call(this,t,n)}};var r,o=n(8),a=(r=o)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.hasNextTick=t.hasSetImmediate=void 0,t.fallback=l,t.wrap=d;var o,a=n(8),i=(o=a)&&o.__esModule?o:{default:o};var s,c=t.hasSetImmediate="function"==typeof e&&e,u=t.hasNextTick="object"==typeof r&&"function"==typeof r.nextTick;function l(e){setTimeout(e,0)}function d(e){return function(t){var n=(0,i.default)(arguments,1);e(function(){t.apply(null,n)})}}s=c?e:u?r.nextTick:l,t.default=d(s)}).call(this,n(52).setImmediate,n(18))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(53),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(4))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,a,i,s,c=1,u={},l=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){m(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){m(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(m,0,e)}:(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&m(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(i+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[c]=o,r(c),c++},p.clearImmediate=h}function h(e){delete u[e]}function m(e){if(l)setTimeout(m,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(4),n(18))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n,r,o){return e(n,t,r,o)}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=n||r.default;var s=(0,o.default)(t)?[]:{};e(t,function(e,t,n){(0,i.default)(e)(function(e,r){arguments.length>2&&(r=(0,a.default)(arguments,1)),s[t]=r,n(e)})},function(e){n(e,s)})};var r=s(n(5)),o=s(n(0)),a=s(n(8)),i=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=function(e){var t=document.createElement("div");t.className="Px(25px) Pt(20px) Ta(c)";var n=document.createElement("img");if(n.className=e.className||"",n.setAttribute("src","https://s.yimg.com/os/yc/pt/icons/fuji-loader-v2-blue.0.svg"),n.setAttribute("data-test","tradeit-spinner"),t.appendChild(n),e.title){var r=document.createElement("h5");r.className="Fz(m) Mt(15px)",r.textContent=e.title,t.appendChild(r)}return t},o=n(19);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name="TradeitStore",this.brokerList={},this.linkedAccounts={},this.quote={},this.authData={},this.accountData={},this.context={lang:"en-US",region:"US"},this.setLinkedAccounts=this.setLinkedAccounts.bind(this),this.getLinkedAccounts=this.getLinkedAccounts.bind(this),this.setContext=this.setContext.bind(this),this.getContext=this.getContext.bind(this),this.getAuthData=this.getAuthData.bind(this),this.setAuthData=this.setAuthData.bind(this)}var t,n,r;return t=e,(n=[{key:"setContext",value:function(e){this.context=Object.assign({},this.context,e)}},{key:"setLinkedAccounts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&0!==e.length&&(n.clear&&(this.linkedAccounts={}),e.forEach(function(e){t.linkedAccounts[e.broker]||(t.linkedAccounts[e.broker]=[]),t.linkedAccounts[e.broker].push(e)}))}},{key:"setAuthData",value:function(e){this.authData=e}},{key:"getLinkedAccounts",value:function(e){var t=this;if(!e){var n=[];return Object.keys(this.linkedAccounts).forEach(function(e){n=n.concat(t.linkedAccounts[e])}),n}return this.linkedAccounts[e]||[]}},{key:"getLinkedAccountsData",value:function(){return this.linkedAccounts}},{key:"getContext",value:function(e){return e?this.context&&this.context[e]:this.context}},{key:"getAuthData",value:function(e){return e?this.authData[e]:this.authData}}])&&a(t.prototype,n),r&&a(t,r),e}(),s={PORTFOLIO:"/v7/finance/desktop/portfolio/all",QUOTE:"/v7/finance/quote",OAUTH_ACCESS_TOKEN:"/tradeit/wapi/v2/user/getOAuthAccessToken",AUTHENTICATE:"/tradeit/wapi/v2/user/authenticate",OAUTH_ACCESS_LOGIN:"/tradeit/wapi/v2/user/getOAuthLoginPopupUrlForWebApp",GET_BROKER_LIST:"/tradeit/wapi/v2/preference/getBrokerList",SECURITY_QUESTION:"/tradeit/wapi/v2/user/answerSecurityQuestion",PREVIEW_TRADE:"/tradeit/wapi/v2/order/previewStockOrEtfOrder",PLACE_TRADE:"/tradeit/wapi/v2/order/placeStockOrEtfOrder",TRANSACTION_SERVICE:"/tradeit/wapi/v2/account/getAllTransactionsHistory",CANCEL_ORDER:"/tradeit/wapi/v2/order/cancelOrder",SINGLE_ORDER_STATUS:"/tradeit/wapi/v2/order/getSingleOrderStatus",ALL_ORDER_STATUS:"/tradeit/wapi/v2/order/getAllOrderStatus",GET_ACCOUNT_POSITIONS:"/tradeit/wapi/v2/position/getPositions",ACCOUNT_OVERVIEW:"/tradeit/wapi/v2/balance/getAccountOverview",OAUTH_TOKEN_DELETE:"/tradeit/wapi/v2/user/oAuthDelete",OAUTH_TOKEN_UPDATE:"/tradeit/wapi/v2/user/getOAuthLoginPopupURLForTokenUpdate",KEEP_ALIVE:"/tradeit/wapi/v2/user/keepSessionAlive",CLOSE_SESSION:"/tradeit/wapi/v2/user/closeSession"},c={100:{shortMessage:"System Error",longMessages:["Something happened with your request, please try again."],preferProvidedMessage:!1},101:{shortMessage:"Concurrent Authentication",longMessages:["You are trying to access your broker account from multiple sources."]},200:{shortMessage:"Broker Execution Error",longMessages:["Your Broker didn't allowed that action, try changing some parameters."],isRetryAllowed:!1},300:{shortMessage:"Broker Authentication",longMessages:["Authentication info is incorrect or You may have changed your login information, you need to login again."],isRetryAllowed:!1},301:{shortMessage:"Too Many Login Attempts",longMessages:["You had 3 invalid login attempts in a row, your IP will be blocked from TradeIt servers for a duration of 5 minutes."],isRetryAllowed:!1},400:{shortMessage:"Broker Account Error",longMessages:["You might need to take action on the brokers site (ie. sign exchange agreement, sign margin agreement) before proceeding further."],isRetryAllowed:!1},500:{shortMessage:"Params Error",longMessages:["Your publisher should check the parameters being passed in"],isRetryAllowed:!1},600:{shortMessage:E({id:"ACCOUNT_REFRESH"}),longMessages:[E({id:"ACCOUNT_REFRESH_MSG"})],isRetryAllowed:!0},700:{shortMessage:E({id:"ACCOUNT_LOGIN"}),longMessages:[E({id:"ACCOUNT_LOGIN_MSG"})],isRetryAllowed:!0},800:{shortMessage:"Broker Account not available",longMessages:["Your broker account is not available for use yet, it might be in the process of activation. Please check with your broker or check back in one or two business day(s)"],isRetryAllowed:!1}},u={EQUITY:"equities",ETF:"equities",CURRENCY:"fx",OPTION:"options",CRYPTOCURRENCY:"crypto"},l={TRADEIT_HEADER:"ftradeit-header",TRADEIT_FOOTER:"ftradeit-footer",TRADEIT_GROWL:"ftradeit-growl",TRADEIT_CONTENT:"ftradeit-content",TRADEIT_MODAL:"ftradeit-modal"},d={buy:!0,buyOpen:!0,buyClose:!0,buyToCover:!0,BUY:!0,BUY_OPEN:!0,BUY_CLOSE:!0,BUY_TO_COVER:!0},p={buy:"BUY",buyOpen:"BUY_OPEN",buyClose:"BUY_CLOSE",buyToCover:"BUY_TO_COVER"},h={sell:"SELL",sellOpen:"SELL_OPEN",sellClose:"SELL_CLOSE",sellShort:"SELL_SHORT"},m={day:"GOOD_FOR_DAY",gtc:"GTC"},f="Other",b="fin-trd-it",y="fin-tradeit";function E(e,t){var n=o[e.id];return n&&t&&Object.keys(t).forEach(function(e){n=n.replace(new RegExp("{"+e+"}","g"),t[e])}),n||e.id}function v(e){return e.subsec||(e.subsec=b),e.sec||(e.sec=T().getContext().rapidSec),Object.keys(e).map(function(t){return t+":"+e[t]}).join(";")+";"}function T(){return window&&(window.YFinTradeit||(window.YFinTradeit={}),window.YFinTradeit.store||(window.YFinTradeit.store=new i)),window.YFinTradeit.store}function g(e){var t=[];return e.forEach(function(e){e.linkedAccount&&t.push(Object.assign({},e.linkedAccount,{pfId:e.pfId}))}),t}function C(){window&&window.rapidInstance&&(window.rapidInstance.isModuleTracked(y)?window.rapidInstance.refreshModule(y,!1):window.rapidInstance.addModules([y],!1))}function O(e,t,n,r){if(window&&window.rapidInstance){var o=T().getContext().rapidSec;n.subsec=b,window.rapidInstance.beaconClick(o,e||"-",t||0,n,r)}}function _(e,t,n){if(window&&window.rapidInstance){var r=T().getContext().rapidSec,o=Object.assign({},t,{sec:r,subsec:b,pl1:r,pl2:b,pl3:t.slk||""});window.rapidInstance.beaconEvent(e,o,n)}}function S(e){return!e||isNaN(e)?e:e<5?e.toFixed(5):e<10?e.toFixed(3):e.toFixed(2)}function N(e){var t=T().getContext();"function"==typeof t.onBeacon&&t.onBeacon({beaconString:e.beaconString||y,type:e.type,code:e.code,message:e.message,params:JSON.stringify(Object.assign({},e.params,{guid:t.guid,region:t.region,lang:t.lang}))})}var I=function(e){var t=document.createElement("div");t.className="Pt(30px) Pt(20px)--mobp Pt(20px)--mobl Px(20px)";var n=document.createElement("h2");if(n.className="Mb(15px)",n.textContent=e.errorHeading||E({id:"SOMETHING_WENT_WRONG"}),t.appendChild(n),Array.isArray(e.errorMessage))e.errorMessage.forEach(function(e){var n=document.createElement("p");n.className="Mb(15px)",n.textContent=e,t.appendChild(n)});else{var r=document.createElement("p");r.className="Mb(20px)",r.textContent=e.errorMessage||"",t.appendChild(r)}if((void 0===e.isRetryAllowed||e.isRetryAllowed)&&"function"==typeof e.onRetry){var o=document.createElement("button");o.className="Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) Cur(p)",o.setAttribute("data-ylk",v({slk:"error-retry",elm:"btn",elmt:"ct",itc:1})),o.addEventListener("click",e.onRetry),o.textContent=e.buttonText||E({id:"TRY_AGAIN"}),t.appendChild(o)}return t},A=n(1),k=n.n(A),R=["https://query1.finance.yahoo.com","https://query2.finance.yahoo.com"],x=25e3;function w(e,t){var n=new XMLHttpRequest;n.timeout=x;var r,o=function(e,t){var n={crumb:e.crumb,lang:e.lang,region:e.region,corsDomain:window&&window.location&&window.location.hostname};if(window&&window.location){var r=window.location;n.corsDomain=r.protocol+"//"+r.hostname+(r.port?":"+r.port:"")}var o=Object.assign({},n,t||{}),a=[];return Object.keys(o).forEach(function(e){a.push(e+"="+o[e])}),"?"+a.join("&")}(T().getContext(),e.query);n.open(e.method||"GET",(e.host||(r=Math.floor(Math.random()*(R.length-0))+0,R[r]))+e.url+o,!0),n.withCredentials=!0,e.headers&&e.headers.forEach(function(e){n.setRequestHeader(e.name,e.value)}),n.onload=function(){return 200===n.status?"string"==typeof n.responseText?t(null,JSON.parse(n.responseText)):t(null,n.responseText):(N({type:"error",beaconString:"fin-tradeit-api",code:n.status,message:n.responseText,params:e}),t({status:n.status,message:n.responseText},null))},n.onerror=function(){return N({type:"error",code:n.status,message:n.responseText,params:e}),t({status:n.status,message:n.responseText},null)},n.send(e.body&&JSON.stringify(e.body))}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={}}var t,n,r;return t=e,(n=[{key:"setState",value:function(e,t){if(Object.assign(this.state,e),"function"==typeof this.render){if(this.container)for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.render(),C(),"function"==typeof t&&t()}}}])&&M(t.prototype,n),r&&M(t,r),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return 0===e.indexOf("/tradeit/")}var G=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(a=B(t).call(this))||"object"!==L(a)&&"function"!=typeof a?U(o):a).container=e.container,n.intermContainer=T().getContext("container").querySelector('[data-id="'+l.TRADEIT_MODAL+'"]'),n.state={request:e.request,onSuccess:e.onSuccess,onError:e.onError,success:e.success||{},error:e.error||{},retries:0,placeHolder:void 0!==e.placeHolder?e.placeHolder:r(e.spinnerConfig||{}),content:"",requestCompleted:!1},n.onRetry=n.onRetry.bind(U(n)),n.onAuthenticate=n.onAuthenticate.bind(U(n)),n.onAuthUpdate=n.onAuthUpdate.bind(U(n)),n.onSuccess=n.onSuccess.bind(U(n)),n.onError=n.onError.bind(U(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,P),n=t,(o=[{key:"onAuthenticate",value:function(){var e=this,t=T().getAuthData();de({container:this.container,longName:t.longName,userId:t.userId,userToken:t.userToken},function(){e.setState({retries:0,requestCompleted:!1})})}},{key:"onAuthUpdate",value:function(){var e=this,t=T().getAuthData();pe({container:this.container,longName:t.longName,shortName:t.shortName,userId:t.userId,userToken:t.userToken,type:"OAUTH_TOKEN_UPDATE"},function(){e.setState({retries:0,requestCompleted:!1})})}},{key:"onRetry",value:function(){this.setState({requestCompleted:!1,retries:this.state.retries+1})}},{key:"onSuccess",value:function(e){var t=this.state,n=t.onSuccess,r=t.success;if("function"==typeof n){var o=n(e)||document.createElement("div");this.intermContainer&&(this.intermContainer.style.display="none"),this.container&&(this.container.style.display="block"),r.disableUIUpdate||this.setState({content:o,requestCompleted:!0,container:this.container}),C()}}},{key:"onError",value:function(e){var t=this.state,n=t.onError,r=t.error,o=t.retries,a=r.heading,i=r.message,s=r.buttonText,u=void 0===r.enableRetry||r.enableRetry,l=this.onRetry,d=u&&o<5,p=!1;e&&e.code&&(c[e.code].preferProvidedMessage||(a=e.shortMessage||c[e.code].shortMessage,i=e.longMessages||c[e.code].longMessages),d=!1!==c[e.code].isRetryAllowed&&d,600!==e.code&&700!==e.code||(p=!0,600===e.code?(a=E({id:"ACCOUNT_REFRESH"}),i=[E({id:"ACCOUNT_REFRESH_MSG"})],s=E({id:"REFRESH"})):(a=E({id:"ACCOUNT_LOGIN"}),i=[E({id:"ACCOUNT_LOGIN_MSG"})],s=E({id:"LOGIN_BROKER_DEF"})),l=600===e.code?this.onAuthenticate:this.onAuthUpdate),e.token&&console.error("> fin-tradeit: Request failed! code:".concat(e.code,", userToken:").concat(e.token))),p||"function"!=typeof n||n({shortMessage:a,longMessages:i,token:e.token,status:e.status,code:e.code}),p||!r.disableUIUpdate?(this.intermContainer&&(this.intermContainer.style.display="block"),this.container&&(this.container.style.display="none"),this.setState({content:I({errorHeading:a,errorMessage:i,buttonText:s,onRetry:l,isRetryAllowed:d}),requestCompleted:!0,container:this.intermContainer})):(this.intermContainer.style.display="none",this.container.style.display="block"),C()}},{key:"render",value:function(){var e=this,t=this.state,n=t.content,r=t.request,o=t.requestCompleted,a=t.placeHolder,i=t.container;if(o){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(n)}else{for(this.intermContainer&&(this.intermContainer.style.display="block"),this.container&&(this.container.style.display="none");this.intermContainer.firstChild;)this.intermContainer.removeChild(this.intermContainer.firstChild);this.intermContainer.appendChild(a),Array.isArray(r)?k()(r.map(function(e){return function(t){w(e,t)}}),function(t,n){if(!t&&n){for(var o=0;o<r.length;o++)if(j(r[o].url)&&"ERROR"===n[o].status)return void e.onError(n[o]);e.onSuccess(n)}else e.onError(t)}):w(r,function(t,n){t||!n||j(r.url)&&"ERROR"===n.status?e.onError(t||n):e.onSuccess(n)})}}}])&&D(n.prototype,o),a&&D(n,a),t}();function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={className:t.className,height:t.height,width:t.width,icon:t.icon,color:t.color,style:t.style||""}}var t,n,r;return t=e,(n=[{key:"render",value:function(){var e=this.state,t=e.className,n=e.width,r=e.height,o=e.icon,a=e.style,i=e.color,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("class",t),s.setAttribute("height",r||30),s.setAttribute("width",n||30),s.setAttribute("data-icon",o.name||""),s.setAttribute("style",a),i&&(s.setAttribute("fill",i),s.setAttribute("stroke",i)),s.style.strokeWidth=0,s.setAttribute("viewBox","0 0 "+o.width+" "+o.height);var c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",o.path),s.appendChild(c),s}}])&&W(t.prototype,n),r&&W(t,r),e}(),q=n(20),K=n.n(q),$="cf-cont",Y="cf-pflink",V=function(e){var t=document.createElement("div");t.className="Px(20px) Pt(30px) Pt(150px)--mobp Bdts(s) Bdtw(5px) Bdtc($green-1)";var n=document.createElement("div");n.className="Maw(530px) Mx(a)",t.appendChild(n);var r=document.createElement("div");r.className="Bdrs(100%) Mx(a) H(35px) W(35px) Bgc($green-1) Va(m)",r.appendChild(new H({className:"W(20px) H(20px) Fill(white) Stk(white) Va(m) Mt(8px)",icon:K.a,width:20,height:20}).render()),n.appendChild(r);var o=document.createElement("h2");o.className="My(10px)",o.textContent=e.title,n.appendChild(o);var a=document.createElement("p");a.className="Mb(20px)",a.textContent=e.message,n.appendChild(a);var i=document.createElement("div");if(i.className="Ta(start)--mobp Ta(start)--mobl Mt(30px)--mobp",n.appendChild(i),e.btnText&&e.onClick){var s=document.createElement("button");s.className="Bgc($c-fuji-blue-1-b)  C(white) Bgc($actionBlueHover):h Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) Whs(nw) Miw(150px) W(48%)--mobp W(48%)--mobl Cur(p) M(a) Ta(c)",s.setAttribute("data-ylk",v(e.btnModel)),s.setAttribute("data-id",$),s.addEventListener("click",e.onClick),s.textContent=e.btnText,i.appendChild(s)}if(e.showPf){var c=e.pfId?"/portfolio/".concat(e.pfId,"/"):"/portfolios",u=document.createElement("a");u.className="Ta(c) C($c-fuji-blue-1-b) Bgc(white) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($actionBlueHover):h Fw(500) Px(20px) Py(8px) Bdrs(2px) Fz(s) D(ib) Mstart(20px) Mstart(0px)--mobp Whs(nw) Miw(110px) W(35%)--mobp W(35%)--mobl Fl(end)--mobp Fl(end)--mobl Cur(p) Td(n)",u.setAttribute("href",c),u.setAttribute("data-ylk",v({slk:"go-portfolio",elm:"link",elmt:"ct",itc:0,rspns:"nav"})),u.setAttribute("data-id",Y),u.textContent=E({id:"GO_TO_PORTFOLIO"}),i.appendChild(u)}return t};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee="cf-pflink",te=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=X(t).call(this))||"object"!==z(o)&&"function"!=typeof o?J(r):o).container=e.container,n.state={isLinked:!1,userId:e.userId,userToken:e.userToken,oAuthURL:e.oAuthURL,longName:e.longName,shortName:e.shortName,onAuthenticate:e.onAuthenticate,onAccountLink:e.onAccountLink,activationTime:e.activationTime,isAuthenticating:!1,yahooCrumb:"",selectedPfId:"",errorLinkWindow:!1,tradeData:null},n.onLoginBroker=n.onLoginBroker.bind(J(n)),n.openLoginWindow=n.openLoginWindow.bind(J(n)),n.closeLoginWindow=n.closeLoginWindow.bind(J(n)),n.onAuthenticate=n.onAuthenticate.bind(J(n)),n.onReceiveMessage=n.onReceiveMessage.bind(J(n)),n.hasMessageListener=!1,n.store=T(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,P),n=t,(o=[{key:"onPortfolioRequest",value:function(e){var t=this,n=this.state.shortName;w({url:s.PORTFOLIO,query:{userId:this.store.getContext("guid"),fields:"quoteType"},method:"GET"},function(r,o){var a="",i=[];if(!r&&o){for(var s=g(i=o.finance.result[0].portfolios),c=0;c<s.length;c++)if(s[c].broker===n){a=s[c].pfId;break}t.store.setLinkedAccounts(s,{clear:!0});var u=t.container.querySelector('[data-id="'+ee+'"]');u&&u.setAttribute("href","/portfolio/".concat(a,"/"))}"function"==typeof e&&e({portfolios:i,selectedPfId:a})})}},{key:"onAuthenticate",value:function(){var e=this.state,t=e.tradeData,n=e.onAuthenticate;"function"==typeof n&&n({tradeData:t})}},{key:"onSuccessAccountLink",value:function(e,t){var n=this,r=this.state.longName,o=e.userId,a=e.userToken,i=e.activationTime;de({container:this.container,userId:o,userToken:a,longName:r,disableUIUpdate:!0},function(e){n.onPortfolioRequest(),n.setState({isLinked:!0,isAuthenticating:!1,errorLinkWindow:!1,activationTime:i,userId:o,userToken:a,tradeData:e}),"function"==typeof t&&t()})}},{key:"onLoginBroker",value:function(){this.hasMessageListener||(window.addEventListener?window.addEventListener("message",this.onReceiveMessage,!1):window.attachEvent("onmessage",this.onReceiveMessage),this.hasMessageListener=!0),this.openLoginWindow(this.state.oAuthURL)}},{key:"onImmatureWindowClose",value:function(){this.state.shortName!==f&&this.setState({errorLinkWindow:!0})}},{key:"openLoginWindow",value:function(e){var t=this;this.loginWindow&&!this.loginWindow.closed?this.loginWindow.location=e:(this.loginWindow=window.open(e,E({id:"LOGIN_BROKER"},{broker:this.state.longName}),"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes,width=600,height=400"),this.windowTimer=setInterval(function(){t.loginWindow&&t.loginWindow.closed&&t.closeLoginWindow(!0)},1e3))}},{key:"closeLoginWindow",value:function(e){this.loginWindow&&!this.loginWindow.closed&&this.loginWindow.close(),this.windowTimer&&(clearInterval(this.windowTimer),this.windowTimer=null),e&&this.onImmatureWindowClose()}},{key:"onReceiveMessage",value:function(e,t){var n=this,r=this.state.yahooCrumb,o=e.data;if("string"==typeof o)try{o=JSON.parse(o)}catch(e){return}o.oAuthVerifier&&(this.closeLoginWindow(),this.hasMessageListener&&(window.removeEventListener?window.removeEventListener("message",this.onReceiveMessage):window.removeEvent("onmessage",this.onReceiveMessage),this.hasMessageListener=!1),new G({container:this.container,request:{url:s.OAUTH_ACCESS_TOKEN,method:"POST",headers:[{name:"Content-Type",value:"application/json"}],body:{crumb:r,oAuthVerifier:o.oAuthVerifier}},spinnerConfig:{title:E({id:"LINKING_ACCOUNT"})},error:{heading:E({id:"SOMETHING_WENT_WRONG"}),message:E({id:"ERR_API_OAUTH_ACCESS_TOKEN"})},success:{disableUIUpdate:!0},onSuccess:function(e){_("tradeit-brk-ln",{slk:n.state.longName,elm:"itm",elmt:"ct",itc:1},"acc-lnkd"),n.setState({isAuthenticating:!0}),n.onSuccessAccountLink(e,t),"function"==typeof t&&t()},onError:function(){"function"==typeof t&&t()}}).render())}},{key:"render",value:function(){var e=this.state,t=e.isLinked,n=e.longName,o=e.selectedPfId,a=e.activationTime,i=e.onAccountLink,s=e.errorLinkWindow,c=e.isAuthenticating,u=document.createElement("div");if(u.className="Pt(30px) Pt(20px)--mobp Pt(20px)--mobl Px(20px)",t)u.className="","IMMEDIATE"===a?u.appendChild(V({title:E({id:"SUCCESS_LINK"}),message:E({id:"SUCCESS_LINK_MSG"},{broker:n}),btnText:E({id:"CONTINUE"}),onClick:i?null:this.onAuthenticate,showPf:!0,btnModel:{slk:"continue",itc:1,elm:"btn",elmt:"ct"},pfId:o})):u.appendChild(V({title:E({id:"SUCCESS_LINK"}),message:E({id:"DELAYED_LINK_MSG"},{broker:n})})),"function"==typeof i&&i();else if(s){var l=document.createElement("h2");l.className="Mb(15px)",l.textContent=E({id:"LOGIN_BROKER"},{broker:n}),u.appendChild(l);var d=document.createElement("p");d.className="M(0) Mb(15px)",d.textContent=E({id:"LOGIN_WINDOW_CLOSED"}),u.appendChild(d);var p=document.createElement("button");p.className="Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) Cur(p)",p.setAttribute("data-ylk",v({itc:1,slk:"login-"+n,elm:"btn",elmt:"ct",outcm:"open-login"})),p.addEventListener("click",this.onLoginBroker),p.textContent=E({id:"LOGIN_BROKER"},{broker:n}),u.appendChild(p)}else if(c)u.appendChild(r({title:E({id:"AUTHENTICATING"})}));else{this.onLoginBroker();var h=document.createElement("h2");h.className="Mb(15px)",h.textContent=E({id:"LOGIN_BROKER"},{broker:n}),u.appendChild(h)}this.container.appendChild(u)}}])&&Q(n.prototype,o),a&&Q(n,a),t}(),ne=function(e){var t=document.createElement("div");if(e.shortMessage||e.longMessages){var n=e.longMessages?Array.isArray(e.longMessages)?e.longMessages.join("; "):e.longMessages:"";t.className="Bgi($noticeRedGradient) Bdrs(2px) C(white) Py(10px) Px(15px) "+(e.className||""),t.setAttribute("data-id","err-notice"),t.innerHTML='\n            <span class="Fw(b)">'.concat(e.shortMessage||"",':</span>\n            <span class="">').concat(n,"</span>\n        ")}return t};function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce="ques-options",ue="ans-input",le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ae(t).call(this))||"object"!==re(o)&&"function"!=typeof o?ie(r):o).container=e.container,n.state={longName:e.longName,securityQuestion:e.securityQuestion,securityQuestionOptions:e.securityQuestionOptions,timeStamp:e.timeStamp,token:e.token,onChallengeSubmit:e.onChallengeSubmit,error:null},n.onChallengeSubmit=n.onChallengeSubmit.bind(ie(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,P),n=t,(r=[{key:"onChallengeSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state,r=n.onChallengeSubmit,o=n.timeStamp,a=n.token,i=n.securityQuestionOptions;if("function"==typeof r){var c=e.target,u="";if(i&&i.length>0){var l=c.querySelector('[data-id="'.concat(ce,'"]:checked'));u=l&&l.value}else{var d=c.querySelector('[data-id="'.concat(ue,'"]'));u=d&&d.value}new G({container:this.container,request:{url:s.SECURITY_QUESTION,method:"POST",query:{srv:o},body:{token:a,securityAnswer:u}},success:{disableUIUpdate:!0},spinnerConfig:{title:E({id:"AUTHENTICATING"})},onSuccess:function(e){if("SUCCESS"===e.status)t.state.error=null,r(e);else{var n={error:{shortMessage:e.informationShortMessage||E({id:"SOMETHING_WENT_WRONG"}),longMessages:e.informationLongMessage||[E({id:"ERR_API_SECURITY_QUESTION"})]}};e.securityQuestion&&(n.securityQuestion=e.securityQuestion),e.securityQuestionOptions&&(n.securityQuestionOptions=e.securityQuestionOptions),t.setState(n)}},error:{disableUIUpdate:!0},onError:function(e){var n=e.shortMessage,r=e.longMessages;t.setState({error:{shortMessage:n,longMessages:r}})}}).render()}}},{key:"render",value:function(){var e,t=this.state,n=t.securityQuestion,r=t.securityQuestionOptions,o=t.longName,a=t.error,i=document.createElement("div");r&&r.length>0?((e=document.createElement("ul")).className="M(0) P(0) List(n) Ta(start) Mstart(65px) Mt(15px)",r.forEach(function(t){var n=document.createElement("li");n.className="Mb(10px)",n.innerHTML='\n                    <label><input type="radio" class="Mend(5px)" value="'.concat(t,'" name="question-option" data-id="').concat(ce,'" required>').concat(t,"</label>\n                "),e.appendChild(n)})):((e=document.createElement("div")).className="Ta(start) Mt(10px) Mb(20px)",e.innerHTML='\n                <label class="Fw(b)">'.concat(E({id:"YOUR_ANSWER"}),': <input class="Mstart(5px) H(24px) Fz(s) Pstart(6px)" type="text" data-id="').concat(ue,'" required></label>\n            '));var s=document.createElement("h2");s.className="Fz(m) Mb(15px) Pt(20px)",s.textContent=E({id:"SECURITY_BROKER"},{broker:o}),i.appendChild(s),i.appendChild(ne({className:"Mx(15px) Mb(15px)",shortMessage:a&&a.shortMessage,longMessages:a&&a.longMessages}));var c=document.createElement("h3");c.className="Mb(15px)",c.textContent=E({id:"SECURITY_SUBTITLE"}),i.appendChild(c);var u=document.createElement("div");u.className="Mx(a) Bgc($grey-4) Bdrs(3px) Bd Bdc($grey-5) P(15px) C($black-1) Mx(a) Maw(530px) Mb(20px)",i.appendChild(u);var l=document.createElement("form");l.className="W(100%)",l.addEventListener("submit",this.onChallengeSubmit),u.appendChild(l);var d=document.createElement("div");d.className="Ta(start)",d.setAttribute("data-test","sec-question");var p=document.createElement("span");p.className="Fw(b)",p.textContent="".concat(E({id:"QUESTION"}),":");var h=document.createElement("span");h.className="Mstart(5px)",h.textContent=n,d.appendChild(p),d.appendChild(h),l.appendChild(d),l.appendChild(e);var m=document.createElement("button");m.className="Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) Cur(p)",m.setAttribute("type","submit"),m.setAttribute("data-ylk",v({slk:"sec-ques-submit",itc:1,elm:"btn",elmt:"ct"})),m.textContent=E({id:"SUBMIT"}),l.appendChild(m),this.container.appendChild(i)}}])&&oe(n.prototype,r),o&&oe(n,o),t}();function de(e,t){var n=Date.now(),r=e.container;new G({container:r,request:{url:s.AUTHENTICATE,query:{srv:n},method:"POST",headers:[{name:"Content-Type",value:"application/json"}],body:{userId:e.userId,userToken:e.userToken}},spinnerConfig:{title:E({id:"AUTHENTICATING"})},error:{message:E({id:"ERR_API_AUTHENTICATE"})},onSuccess:function(o){if("SUCCESS"===o.status)return t(o);if("INFORMATION_NEEDED"===o.status){for(;r.firstChild;)r.removeChild(r.firstChild);new le({longName:e.longName,securityQuestion:o.securityQuestion,securityQuestionOptions:o.securityQuestionOptions,timeStamp:n,token:o.token,onChallengeSubmit:t,container:r}).render()}},success:{disableUIUpdate:e.disableUIUpdate}}).render()}function pe(e,t){var n={longName:e.longName,shortName:e.shortName,container:e.container};"function"==typeof e.onAccountLink?n.onAccountLink=e.onAccountLink:n.onAuthenticate=t;var r,o=new te(n),a={broker:e.shortName};"OAUTH_TOKEN_UPDATE"===e.type?(r=s.OAUTH_TOKEN_UPDATE,a.userId=e.userId):r=s.OAUTH_ACCESS_LOGIN,o.openLoginWindow(""),new G({container:e.container,request:{url:r,method:"POST",headers:[{name:"Content-Type",value:"application/json"}],body:a,query:{fidelityPilot:"true"}},onSuccess:function(t){var n=t.oAuthURL;if(e.shortName!==f){var r=/[&]?crumb=([^&]*)/,a=n.match(r)[1],i=n.replace(r,"");o.state.yahooCrumb=a,o.state.oAuthURL=i,o.render()}else o.openLoginWindow(n)},success:{disableUIUpdate:!0},error:{enableRetry:!1},onError:function(){o.closeLoginWindow()}}).render()}var he=n(2),me=n.n(he),fe="link",be="link-sp",ye="link-read",Ee="login",ve=function(e){var t=e.brokerObj,n=e.logoSize,r=void 0===n?"large":n,o=e.type,a=void 0===o?ye:o,i=e.onBrokerSelect,s=e.isLinked;if(!t)return document.createElement("div");var c=t.longName,u=t.shortName,l=t.logos,d=t.accountInfo,p="",h="",m="",f=Function.prototype;a!==ye&&"function"==typeof i&&(f=function(){i(t,a)});var b=c||u,y=document.createElement("button");switch(y.setAttribute("title",b),y.addEventListener("click",f),a){case be:p="Bxsh($boxShadow) W(100%) Bd Bdc($grey-2) M(0) Px(0) Py(6px) Bdrs(2px) Cur(p) Bdc($c-fuji-blue-1-b):h";var E=l.find(function(e){return e.name===r});if(m=v({slk:"list-brkr",g:b,itc:1,elm:"tl",elmt:"logo"}),E&&E.url){var T=document.createElement("img");T.className="H(60px)",T.setAttribute("alt",b),T.setAttribute("src",E.url),y.appendChild(T)}break;case ye:case fe:p="Bd(0) P(0) M(0) Fz(s) Fw(500) C($c-fuji-blue-1-b) Bgc(white) Lh(1.79) Cur(p) Td(n) Td(u):h",m=v({slk:"link-brkr",g:b,itc:1,elm:"itm",elmt:"ct"});var g=document.createElement("span");g.textContent=b,y.appendChild(g),s&&y.appendChild(new H({className:"Fill(black)! Stk(black)! Mstart(8px) Va(m)!",height:14,width:14,icon:me.a}).render());break;case Ee:h="".concat(b," (").concat(d.accountName,")"),p="Bxz(bb) Bd Bdc($grey-2) Bdrs(3px) M(0) Fz(s) Fw(500) C($c-fuji-blue-1-b) Bgc(white) Bgc($extraLightBlue):h Cur(p) Fw(b) W(100%) Ta(start) Pstart(20px) Py(14px)",m=v({slk:"sel-linkd-brkr",g:c,itc:1,elm:"itm",elmt:"ct"})}return y.setAttribute("data-ylk",m),y.className=p,h&&(y.textContent=h),y};function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ge={Fidelity:!0},Ce={shortName:"Dummy",longName:"Dummy Broker",userName:"Username",brokerInstruments:[{instrument:"equities",supportsAccountOverview:!0,supportsPositions:!0,supportsTrading:!0,supportsOrderStatus:!0,supportsTransactionHistory:!0,supportsOrderCanceling:!0,supportsFxRates:!1,isFeatured:!1}],logos:[]},Oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={brokerList:t.brokerList,linkedBrokers:t.linkedBrokers||{},onBrokerSelect:t.onBrokerSelect,showPrimarySponsors:void 0!==t.showPrimarySponsors&&t.showPrimarySponsors},this.useDummy=t.useDummy}var t,n,r;return t=e,(n=[{key:"renderAllBrokerList",value:function(e,t){var n=this.state,r=n.onBrokerSelect,o=n.brokerList,a=n.linkedBrokers,i=document.createElement("ul");return i.className="M(0) P(0) List(n) D(ib) D(b)--mobp Va(t) W(50%) W(100%)--mobp",o.slice(e,t).forEach(function(e){var t=document.createElement("li");t.className="M(0) Mb(10px) Mb(15px)--mobp",t.appendChild(ve({brokerObj:e,isLinked:!!a[e.shortName],type:"link",onBrokerSelect:r})),i.appendChild(t)}),i}},{key:"renderSponsoredBrokerSection",value:function(e,t){var n=document.createElement("section");if(0===e.length&&0===t.length)return n;var r=this.state,o=r.onBrokerSelect,a=r.showPrimarySponsors;n.className="Mb(20px)";var i=document.createElement("h3");if(i.className="Fz(s) Mb(10px) Ta(start) C($grey-3)",i.textContent=E({id:"SPONSORED_BROKERS"}),n.appendChild(i),e.forEach(function(e){n.appendChild(ve({brokerObj:e,type:"link-sp",onBrokerSelect:o}))}),a){var s=document.createElement("ul");s.className="M(0) P(0) List(n) Ov(h) Mt(15px)",t.map(function(e,n){var r=document.createElement("li");r.className="Fl(start) W(30%) Mb(15px) "+((n+1)%3?"Mend(20px)":""),r.appendChild(ve({brokerObj:t[n],type:"link-sp",onBrokerSelect:o,logoSize:"small"})),s.appendChild(r)}),n.appendChild(s)}else t.forEach(function(e){n.appendChild(ve({brokerObj:e,type:"link-sp",onBrokerSelect:o}))});return n}},{key:"render",value:function(){for(var e=this.state.brokerList,t=[],n=[],r=0;r<e.length;r++){for(var o=!1,a=ge[e[r].shortName],i=e[r].brokerInstruments,s=0;s<i.length;s++)if(i[s].isFeatured){o=!0;break}o&&(a?n.push(e[r]):t.push(e[r]))}this.useDummy&&e.unshift(Ce);var c=document.createElement("div");c.className="Maw(530px) Ta(c) M(a) Px(20px) Pt(30px) Pt(20px)--mobp Pt(20px)--mobl Mb(50px)--mobp Mb(30px)--mobl";var u=document.createElement("h2");u.className="C($black-1) Fz(l) Mb(10px) Ta(c)",u.textContent=E({id:"SELECT_BROKER"}),c.appendChild(u),c.appendChild(this.renderSponsoredBrokerSection(n,t));var l=document.createElement("section");l.className="Whs(nw) Ta(start)";var d=document.createElement("div"),p=document.createElement("h3");p.className="Fz(s) D(ib) Mb(10px) Ta(start) C($grey-3)",p.textContent=E({id:"ALL_BROKERS"}),d.appendChild(p);var h=document.createElement("div");h.className="D(ib) Fl(end)",h.appendChild(new H({className:"Fill(black)! Stk(black)! Mend(8px) Va(m)!",height:14,width:14,icon:me.a}).render());var m=document.createElement("span");return m.className="C($grey-3) Fz(s)",m.textContent=E({id:"CHAIN_ICON_LEGEND"}),h.appendChild(m),d.appendChild(h),l.appendChild(d),l.appendChild(this.renderAllBrokerList(0,Math.floor(e.length/2))),l.appendChild(this.renderAllBrokerList(Math.floor(e.length/2),e.length)),c.appendChild(l),c}}])&&Te(t.prototype,n),r&&Te(t,r),e}(),_e=v({itc:0,elm:"itm",elmt:"link"}),Se=[{href:"https://help.yahoo.com/kb/sln28346.html",title:"LEARN_MORE"},{href:"https://policies.yahoo.com/us/en/yahoo/terms/utos/index.htm",title:"TERMS"},{href:"https://policies.yahoo.com/us/en/yahoo/privacy/index.htm",title:"PRIVACY"}],Ne=function(e){var t=e.className;return'\n    <footer class="Ta(c) Py(20px) Bgc($grey-4) Mt(10px) W(100%) B(0) Pos(a)--mobp Pos(a)--mobl '.concat(t,'" data-id="').concat(l.TRADEIT_FOOTER,'">\n        <ul class="M(0) P(0) List(n) Ov(h)">\n            ').concat(Se.map(function(e,t){var n=t!==Se.length-1?"D(ib) BdEnd Bdendc($grey-1) Pend(10px) Mend(5px)":"D(ib) BdEnd(0)";return'\n                        <li class="'.concat(n,'">\n                            <a\n                                class="C($grey-1) Td(n) Cur(p) Td(u):h"\n                                data-ylk="').concat(_e,'"\n                                target="_blank"\n                                rel="noopener"\n                                href="').concat(e.href,'"\n                            >\n                                ').concat(E({id:e.title}),"\n                            </a>\n                        </li>\n                    ")}).join(""),"\n        </ul>\n    </footer>\n")};function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={orderData:t.orderData,onOrderSubmit:t.onOrderSubmit,onOrderEdit:t.onOrderEdit},this.onOrderSubmit=this.onOrderSubmit.bind(this),this.onOrderEdit=this.onOrderEdit.bind(this)}var t,n,r;return t=e,(n=[{key:"onOrderEdit",value:function(e){e.preventDefault(),"function"==typeof this.state.onOrderEdit&&this.state.onOrderEdit(e)}},{key:"onOrderSubmit",value:function(e){e.preventDefault(),"function"==typeof this.state.onOrderSubmit&&this.state.onOrderSubmit(e)}},{key:"renderTradeReview",value:function(){var e=this.state.orderData,t=e.orderDetails,n=e.accountBaseCurrency,r=t.orderAction,o=t.estimatedTotalValue||0,a=t.estimatedOrderCommission||0,i=t.estimatedOrderValue||S(o-a>0?o-a:0),s=d[r]?p[r]||"-":h[r],c=t.orderValueLabel||E({id:d[r]?"ESTIMATED_ORDER_COST":"ESTIMATED_ORDER_PROCEEDS"}),u=E({id:d[r]?"ESTIMATED_TOTAL_COST":"ESTIMATED_TOTAL_PROCEEDS"}),l=m[t.orderExpiration]||"-",f=document.createElement("table");return f.className="W(100%) BdB Bdc($grey-2) Bdcl(c)",f.innerHTML='\n            <tbody>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">'.concat(E({id:"BROKERAGE_ACCOUNT"}),'</td>\n                    <td class="Fw(b)">').concat(e.accountNumber,'</td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(E({id:"SYMBOL"}),'</td>\n                    <td class="Fw(b)">').concat(t.orderSymbol,'</td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(E({id:"ACTION"}),'</td>\n                    <td class="Fw(b)">').concat(E({id:s}),'</td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(E({id:"ORDER_PRICE"}),'</td>\n                    <td class="Fw(b)">').concat(t.orderPrice,'</td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(E({id:"EXPIRATION"}),'</td>\n                    <td class="Fw(b)">').concat(E({id:l}),'</td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(E({id:"NO_OF_SHARES"}),'</td>\n                    <td class="Fw(b)">').concat(t.orderQuantity,'</td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(c,'</td>\n                    <td class="Fw(b)">').concat(i,'<span class="Mstart(5px) Fz(12px) C($gray-6)">').concat(n,'</span></td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(t.orderCommissionLabel||E({id:"BROKER_FEE"}),'</td>\n                    <td class="Fw(b)">').concat(a,'<span class="Mstart(5px) Fz(12px) C($gray-6)">').concat(n,'</span></td>\n                </tr>\n                <tr class="BdT Bdtc($grey-2) H(40px) Ta(start)">\n                    <td class="W(35%) W(50%)--mobp">').concat(u,'</td>\n                    <td class="Fw(b)">').concat(o,'<span class="Mstart(5px) Fz(12px) C($gray-6)">').concat(n,"</span></td>\n                </tr>\n            </tbody>\n        "),f}},{key:"renderForm",value:function(){var e=this.state.orderData.orderDetails.warnings,t=document.createElement("form");t.addEventListener("submit",this.onOrderSubmit);var n=document.createElement("ul");n.className="P(0) M(0) Mt(10px) List(n)";var r=v({elm:"link",elmt:"ct",itc:1});e.forEach(function(e){var t=document.createElement("li");if(t.className="",e.requiresAcknowledgement){var o=document.createElement("input");o.className="Mend(10px)",o.setAttribute("type","checkbox"),o.setAttribute("required",!0),t.appendChild(o)}var a=document.createElement("span");a.textContent=e.message,t.appendChild(a),e.links&&e.links.forEach(function(e){var n=document.createElement("a");n.className="Mstart(6px) Fz(s) Fw(500) Td(n) Td(u):h C($c-fuji-blue-1-b)",n.setAttribute("href",e.url),n.setAttribute("data-ylk",r),n.textContent=e.label,t.appendChild(n)}),n.appendChild(t)}),t.appendChild(n);var o=document.createElement("div");o.className="My(25px)";var a=document.createElement("button");a.className="Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) D(ib) Whs(nw) W(150px) W(48%)--mobp W(48%)--mobl Cur(p)",a.setAttribute("data-ylk",v({slk:"sub-order",elm:"btn",elmt:"ct",itc:1,outcm:"sbmt"})),a.setAttribute("type","submit"),a.textContent=E({id:"SUBMIT_ORDER"}),o.appendChild(a);var i=document.createElement("button");return i.className="C($c-fuji-blue-1-b) Bgc(white) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($actionBlueHover):h Fw(500) Px(20px) Py(8px) Bdrs(2px) Fz(s) D(ib) Mstart(20px) Mstart(0px)--mobp Whs(nw) W(150px) W(48%)--mobp W(48%)--mobl Fl(end)--mobp Fl(end)--mobl Cur(p)",i.setAttribute("data-ylk",v({slk:"edit-order",elm:"btn",elmt:"ct",itc:1})),i.setAttribute("type","button"),i.textContent=E({id:"EDIT_ORDER"}),i.addEventListener("click",this.onOrderEdit),o.appendChild(i),t.appendChild(o),t}},{key:"render",value:function(){var e=document.createElement("div");e.className="Mx(20px)--mobp Mx(50px)";var t=document.createElement("p");return t.className="M(0) Mb(15px)",t.textContent=this.state.orderData.orderDetails.orderMessage,e.appendChild(t),e.appendChild(this.renderTradeReview()),e.appendChild(this.renderForm()),e}}])&&Ie(t.prototype,n),r&&Ie(t,r),e}(),ke=n(21),Re=n.n(ke);function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var we="menu-disp",Me="itm-menu";function Pe(e,t){var n=0;if(t&&e)for(var r=0;r<e.length;r++)if(t===e[r].value){n=r;break}return n}var Le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.options=t.options||[{}];var n=void 0!==t.selected?t.selected:null;this.state={id:t.id,options:t.options,selectedIndex:Pe(t.options,n),className:t.className,onChange:t.onChange,i13nModel:t.i13nModel||{},show:!1},this.onDocumentClick=this.onDocumentClick.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onItemClick=this.onItemClick.bind(this)}var t,n,r;return t=e,(n=[{key:"onDocumentClick",value:function(e){var t=this.state.i13nModel;this.container.contains(e.target)||(O(t.slk,t._p,t,"slct-cls"),this.closeMenu(e))}},{key:"onItemClick",value:function(e){var t=this.state,n=t.options,r=t.i13nModel,o=t.onChange,a=e.target.getAttribute("data-val"),i=Pe(n,a);if(i!==this.state.selectedIndex){var s=e.currentTarget.querySelectorAll("li"),c=s[i];c&&(c.setAttribute("data-selected",!0),c.classList.add("Fw(b)"));var u=s[this.state.selectedIndex];u&&(u.setAttribute("data-selected",!1),u.classList.contains("Fw(b)")&&u.classList.remove("Fw(b)")),this.container.querySelector('[data-id="'+we+'"]').textContent=n[i].displayLabel,this.container.value=a,this.state.selectedIndex=i,O(r.slk,r._p,Object.assign({},r,{c10:a}),"slct-chg"),this.closeMenu(e),"function"==typeof o&&o(e,a)}}},{key:"closeMenu",value:function(e){e.stopPropagation(),this.state.show=!1,document.removeEventListener("click",this.onDocumentClick);var t=this.container.querySelector('[data-id="'+Me+'"]'),n=t&&t.classList;n&&n.add("D(n)")}},{key:"showMenu",value:function(e){e.stopPropagation(),this.state.show=!0,document.addEventListener("click",this.onDocumentClick);var t=this.container.querySelector('[data-id="'+Me+'"]'),n=t&&t.classList;n&&n.contains("D(n)")&&n.remove("D(n)")}},{key:"toggleMenu",value:function(e){e.stopPropagation();var t=this.state.i13nModel;this.state.show?(O(t.slk,t._p,t,"slct-cls"),this.closeMenu(e)):(O(t.slk,t._p,t,"slct-opn"),this.showMenu(e))}},{key:"onKeyDown",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,n=t.i13nModel,r=t.show;switch(e.key){case"Enter":r||(O(n.slk,n._p,n,"slct-opn"),this.showMenu(e));break;case"Escape":r&&(O(n.slk,n._p,n,"slct-opn"),this.closeMenu(e))}}},{key:"renderMenu",value:function(){var e=this.state,t=e.options,n=e.selectedIndex,r=document.createElement("ul");return r.setAttribute("aria-role","listbox"),r.className="Pos(a) Z(8) W(100%) Bd Bdc($grey-2) T(20px) Start(0) M(0) Py(5px) List(n) Bgc(white) Px(0) Miw(100px) Bxsh($boxShadow) O(n) D(n)",r.addEventListener("click",this.onItemClick),r.setAttribute("data-id",Me),t.forEach(function(e,t){var o=document.createElement("li");o.className="Py(8px) Py(10px)--mobp Px(10px) Bgc($extraLightBlue):h Cur(p)",o.setAttribute("data-val",e.value),o.setAttribute("aria-role","option"),o.setAttribute("data-selected",t===n),o.textContent=e.displayLabel,t===n?(o.className+=" Fw(b)",o.setAttribute("data-selected",!0)):o.setAttribute("data-selected",!1),r.appendChild(o)}),r}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selectedIndex,r=e.id;this.container=document.createElement("div"),this.container.classList="D(ib) Cur(p) Fw(n) O(n) Bd Bdc(t) Bdbc($grey-1) Bdbw(0px)--mobp  Bdbw(0px)--mobl Bdc($c-fuji-blue-1-b):f Fz(s) Pt(2px) Pb(6px) W(190px) Pos(r)",this.container.setAttribute("tabindex","0"),r&&this.container.setAttribute("data-id",r),this.container.value=t[n].value,this.container.addEventListener("click",this.toggleMenu),this.container.addEventListener("keydown",this.onKeyDown);var o=document.createElement("div");return o.setAttribute("data-id",we),o.textContent=t[n].displayLabel,o.className="D(ib) Va(m) Pstart(4px) Fw(500)",this.container.appendChild(o),this.container.appendChild(new H({className:"Mstart(6px) Va(m) W(16px) H(16px) Fill($c-fuji-blue-1-b) Stk($c-fuji-blue-1-b) Va(m) Fl(end)",icon:Re.a,width:16,height:16}).render()),this.container.appendChild(this.renderMenu()),this.container}}])&&xe(t.prototype,n),r&&xe(t,r),e}();function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be="err-msg",Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={id:t.id,placeholder:t.placeholder,autofocus:t.autofocus,required:t.required,onInput:t.onInput,className:t.className||"",containerClassName:t.containerClassName||"",errorMessage:t.errorMessage||"Please enter a valid input",value:t.value},this.onInput=this.onInput.bind(this)}var t,n,r;return t=e,(n=[{key:"onInput",value:function(e){var t=this.state.onInput,n=e.currentTarget,r=n.value.trim(),o=r?parseFloat(r):"",a="function"==typeof n.checkValidity&&!n.checkValidity(),i=this.container.querySelector('[data-id="'.concat(Be,'"]'));a?i.classList.remove("D(n)"):i.classList.add("D(n)"),"function"==typeof t&&t(e,{value:o,invalid:a})}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.placeholder,r=e.autofocus,o=e.required,a=e.className,i=e.containerClassName,s=e.errorMessage,c=e.value;this.container=document.createElement("div"),this.container.className="IbBox "+i;var u=document.createElement("input");r&&u.setAttribute("autofocus",!0),o&&u.setAttribute("required",!0),void 0!==c&&u.setAttribute("value",c),u.setAttribute("type","number"),u.setAttribute("min",0),u.setAttribute("step","any"),u.setAttribute("placeholder",n),u.setAttribute("data-id",t),u.setAttribute("class","Fz(s) Py(4px) Pstart(6px) Bdw(0px) Bdbw(1px) Bdbc($grey-2) Bdbc($dataRed):inv O(n) Bdbc($c-fuji-blue-1-b):f Bxsh(n):f Bdbw(2px):f Bdbw(0px)!--mobp Bdbw(0px)!--mobl "+a),u.addEventListener("input",this.onInput),this.container.appendChild(u);var l=document.createElement("div");return l.setAttribute("data-id",Be),l.className="Mt(4px) Mt(0px)--mobp Mb(4px)--mobp Mt(0px)--mobl Mb(4px)--mobl Fz(xs) C($dataRed) Fw(n) D(n)","function"!=typeof u.checkValidity||u.checkValidity()||l.classList.remove("D(n)"),l.textContent=s,this.container.appendChild(l),this.container}}])&&De(t.prototype,n),r&&De(t,r),e}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=["price","accountNumber","orderAction","orderQuantity","orderPriceType","orderPriceTypeInput","orderExpiration","userDisabledMargin","cost"],Ke=["price","accountNumber","orderAction","orderQuantity","orderPriceType","orderPriceTypeInput","orderExpiration","userDisabledMargin","cost"],$e="actionList",Ye="expirationList",Ve="marginCashList",ze="orderTypeList",Qe="noOfShares",Xe="currentPrice",Je="priceTypeInput",Ze="secPriceTypeInput",et="priceTypeInputLabel",tt="priceTypeInputField",nt="priceTypeInputContent",rt="powerInfo",ot="trade-errNotice",at="order-review",it="estCost",st={ORDER:"order",REVIEW:"review",CONFIRM:"confirm"},ct={MARKET:"market",LIMIT:"limit",STOP_MARKET:"stopMarket",STOP_LIMIT:"stopLimit"},ut=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ge(t).call(this))||"object"!==Fe(o)&&"function"!=typeof o?We(r):o).container=e.container,n.state={action:e.action||"buy",selectedAccountIndex:void 0===e.selectedAccountIndex?0:e.selectedAccountIndex,orderPriceType:ct.MARKET,quoteData:null,accountData:null,tradeData:e.tradeData,symbol:e.symbol,companyName:e.companyName,quoteType:e.quoteType||"EQUITY",type:e.type||st.ORDER,orderData:e.orderData||null,onViewOrderStatus:e.onViewOrderStatus,onAccountChange:e.onAccountChange||Function.prototype,tradingUIState:{},requestPending:!0,noOfShares:"",priceInput:"",selectedPfId:"",errorData:null,invalidShares:!0,invalidPrice:!1,invalidSecPrice:!1},n.onReviewOrder=n.onReviewOrder.bind(We(n)),n.onOrderSubmit=n.onOrderSubmit.bind(We(n)),n.onOrderEdit=n.onOrderEdit.bind(We(n)),n.onPriceTypeChange=n.onPriceTypeChange.bind(We(n)),n.onPriceTypeInput=n.onPriceTypeInput.bind(We(n)),n.onSecPriceTypeInput=n.onSecPriceTypeInput.bind(We(n)),n.onOrderQuantityInput=n.onOrderQuantityInput.bind(We(n)),n.onViewOrderStatus=n.onViewOrderStatus.bind(We(n)),n.onActionChange=n.onActionChange.bind(We(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,P),n=t,(r=[{key:"init",value:function(){var e=this,t=this.state,n=t.type,r=t.symbol,o=t.action,a=t.tradeData,i=t.selectedAccountIndex;if(n===st.ORDER){var c=a.accounts[i]||{};k()([function(e){w({url:s.QUOTE,query:{fields:"regularMarketPrice,regularMarketChangePercent,regularMarketChange,currency",symbols:r,ssl:!0,formatted:!0},method:"GET"},e)},function(e){w({url:d[o]?s.ACCOUNT_OVERVIEW:s.GET_ACCOUNT_POSITIONS,method:"POST",body:{token:a.token,accountNumber:c.accountNumber},headers:[{name:"Content-Type",value:"application/json"}]},e)}],function(t,n){if(t)console.warn("tradeit silent error:",t);else{var r={requestPending:!1},a=n[0].quoteResponse&&n[0].quoteResponse.result[0];if(a&&(r.quoteData={regularMarketPrice:a.regularMarketPrice,regularMarketChange:a.regularMarketChange,regularMarketChangePercent:a.regularMarketChangePercent,fullExchangeName:a.fullExchangeName,currency:a.currency,regularMarketTime:a.regularMarketTime},e.renderQuotePrice(r.quoteData)),"SUCCESS"===n[1].status)if(d[o]){var i=n[1].accountOverview&&n[1].accountOverview.buyingPower||n[1].buyingPower,s=n[1].accountOverview&&n[1].accountOverview.marginCash||n[1].marginCash;r.accountData={buyingPower:i,marginCash:s},e.renderPowerInfo(!0,r.accountData,c)}else r.accountData={positions:n[1].positions},e.renderPowerInfo(!1,r.accountData,c);e.state=Object.assign({},e.state,r)}})}}},{key:"onOrderSubmit",value:function(e,t){var n=this,r=this.state,o=r.orderData,a=r.tradeData,i=r.selectedAccountIndex;new G({container:this.container,request:{url:s.PLACE_TRADE,method:"POST",body:{token:a.token,orderId:o.orderId},headers:[{name:"Content-Type",value:"application/json"}]},spinnerConfig:{title:E({id:"SUBMITING_ORDER"})},success:{disableUIUpdate:!0},error:{disableUIUpdate:!0},onSuccess:function(e){_("tradeit-trd-sbmt",{slk:"sub-order",elm:"btn",elmt:"ct",itc:1},"ord-sbmt");for(var r=T().getLinkedAccounts(),o=a.accounts[i].accountNumber,s="",c=0;c<r.length;c++)if(r[c].accountNumber===o){s=r[c].pfId;break}n.setState({errorData:null,type:st.CONFIRM,orderData:Object.assign({},n.state.orderData,{confirmation:e}),selectedPfId:s}),"function"==typeof t&&t()},onError:function(e){var r=e.shortMessage,o=e.longMessages;n.state.errorData={shortMessage:r,longMessages:o},n.renderErrorNotification(),"function"==typeof t&&t()}}).render()}},{key:"onOrderEdit",value:function(){var e=this;this.setState({errorData:null,type:st.ORDER},function(){e.state.tradingUIState={}})}},{key:"onOrderQuantityInput",value:function(e,t){var n=t.value,r=t.invalid;n<=0&&(n="",r=!0),this.state=Object.assign({},this.state,{invalidShares:r,noOfShares:n}),this.updateReviewButton(),this.updateEstimatedCost()}},{key:"onPriceTypeInput",value:function(e,t){var n=t.value,r=t.invalid;n<=0&&(n="",r=!0),this.state=Object.assign({},this.state,{invalidPrice:r,priceInput:n}),this.updateReviewButton(),this.updateEstimatedCost()}},{key:"onSecPriceTypeInput",value:function(e,t){var n=t.value,r=t.invalid||n<=0;this.state=Object.assign({},this.state,{invalidSecPrice:r}),this.updateReviewButton(),this.updateEstimatedCost()}},{key:"onPriceTypeChange",value:function(e,t){var n,r,o={orderPriceType:t},a=this.container.querySelector('[data-id="'.concat(Je,'"]')),i=this.container.querySelector('[data-id="'.concat(Ze,'"]'));if(a&&"function"==typeof a.checkValidity&&(n=!a.checkValidity()),i&&"function"==typeof i.checkValidity&&(r=!i.checkValidity()),t!==ct.MARKET)switch(t){case ct.LIMIT:o.invalidPrice=void 0===n||n,o.invalidSecPrice=!1;break;case ct.STOP_MARKET:o.invalidPrice=!1,o.invalidSecPrice=void 0===r||r;break;case ct.STOP_LIMIT:o.invalidPrice=void 0===n||n,o.invalidSecPrice=void 0===r||r}else o.invalidPrice=!1,o.invalidSecPrice=!1;this.state=Object.assign({},this.state,o);var s=this.container.querySelector('[data-id="'.concat(tt,'"]')),c=this.container.querySelector('[data-id="'.concat(nt,'"]')),u=s.querySelector('[data-id="'.concat(et,'"]'));if(s&&c&&u){for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(this.renderLimitStopInputs(s,u))}this.updateReviewButton(),this.updateEstimatedCost()}},{key:"onActionChange",value:function(e,t){this.setState({action:t,requestPending:!0})}},{key:"onReviewOrder",value:function(e,t){var n=this;e.preventDefault();var r=this.state,o=r.tradeData,a=r.symbol,i=r.selectedAccountIndex,c=r.action,u=r.orderPriceType,l=r.priceInput,d=r.noOfShares,p=e.target,h=o.accounts[i],m=c,f=d||0,b=p.querySelector('[data-id="'.concat(Ye,'"]')).value,y=p.querySelector('[data-id="'.concat(Ve,'"]'))&&p.querySelector('[data-id="'.concat(Ve,'"]')).value,v=h.accountNumber,T=h.accountBaseCurrency,g={token:o.token,accountNumber:v,orderAction:m,orderQuantity:f,orderSymbol:a,orderPriceType:u,orderExpiration:b,userDisabledMargin:"true"===y||!0===y};if(u!==ct.MARKET){var C=l||0,O=p.querySelector('[data-id="'.concat(Ze,'"]')),_=O&&parseFloat(O.value||0);u===ct.STOP_LIMIT?(g.orderLimitPrice=C,g.orderStopPrice=_):u===ct.LIMIT?g.orderLimitPrice=C:g.orderStopPrice=_}new G({container:this.container,request:{url:s.PREVIEW_TRADE,method:"POST",body:g,headers:[{name:"Content-Type",value:"application/json"}]},error:{disableUIUpdate:!0},success:{disableUIUpdate:!0},spinnerConfig:{title:E({id:"REVIEWING_ORDER"})},onSuccess:function(e){var r=e.orderDetails;n.setState({errorData:null,type:"review",orderData:{orderId:e.orderId,accountNumber:v,regularMarketPrice:o.regularMarketPrice,accountBaseCurrency:T,orderDetails:r},tradingUIState:{orderLimitPrice:g.orderLimitPrice,orderStopPrice:g.orderStopPrice,orderExpiration:g.orderExpiration}}),"function"==typeof t&&t()},onError:function(e){var r=e.shortMessage,o=e.longMessages;n.state.errorData={shortMessage:r,longMessages:o},n.renderErrorNotification(),"function"==typeof t&&t()}}).render()}},{key:"onViewOrderStatus",value:function(){var e=this.state,t=e.onViewOrderStatus,n=e.orderData,r=e.tradeData;"function"==typeof t&&t({longName:n.confirmation.broker,token:r.token,accountNumber:n.accountNumber,accountBaseCurrency:n.accountBaseCurrency})}},{key:"updateReviewButton",value:function(){var e=this.container.querySelector('[data-id="'.concat(at,'"]'));e&&(this.state.invalidPrice||this.state.invalidShares||this.state.invalidSecPrice?(e.classList.add("Op(0.3)"),e.classList.remove("Cur(p)"),e.classList.remove("Bgc($actionBlueHover):h"),e.setAttribute("disabled","true")):(e.removeAttribute("disabled"),e.classList.remove("Op(0.3)"),e.classList.add("Cur(p)"),e.classList.add("Bgc($actionBlueHover):h")))}},{key:"updateEstimatedCost",value:function(){var e,t=this.container.querySelector('[data-id="'.concat(it,'"]')),n=this.state,r=n.tradeData,o=n.selectedAccountIndex,a=r.accounts[o];if(this.state.orderPriceType===ct.LIMIT||this.state.orderPriceType===ct.STOP_LIMIT)e=this.state.priceInput;else{var i=this.state.quoteData;e=i&&i.regularMarketPrice&&i.regularMarketPrice.raw||""}t&&(t.innerHTML="\n                <span>\n                    ".concat(""===e?"N/A":S(e*this.state.noOfShares),'\n                </span>\n                <span class="Fz(xs) Mstart(2px) C($grey-1)">\n                    ').concat(a.accountBaseCurrency,"\n                </span>\n            "))}},{key:"renderLimitStopInputs",value:function(e,t){if(e){var n=this.state,r=n.orderPriceType,o=n.tradingUIState,a="",i=null,s="",c="W(185px)",u=document.createElement("div");switch(r){case ct.MARKET:break;case ct.LIMIT:s=E({id:"LIMIT_PRICE"}),a=E({id:"LIMIT"});break;case ct.STOP_MARKET:s=E({id:"STOP_PRICE"}),a=E({id:"STOP"});break;case ct.STOP_LIMIT:c="W(125px)",s=E({id:"LIMIT_PRICE"})+" - "+E({id:"STOP_PRICE"}),a=E({id:"LIMIT"})}if(r===ct.STOP_MARKET||r===ct.STOP_LIMIT){var l={id:Ze,placeholder:E({id:"STOP"}),className:"Ta(end)--mobp Ta(end)--mobl "+c,onInput:this.onSecPriceTypeInput,required:!0,errorMessage:E({id:"ERR_INVALID_PRICE"})};o&&o.orderStopPrice&&(l.value=o.orderStopPrice),i=new Ue(l).render()}if(r===ct.STOP_MARKET)u.appendChild(i);else if(r!==ct.MARKET){var d={id:Je,placeholder:a,className:"Ta(end)--mobp Ta(end)--mobl "+c,containerClassName:"Mend(15px)",onInput:this.onPriceTypeInput,required:!0,errorMessage:E({id:"ERR_INVALID_PRICE"})};o&&o.orderLimitPrice&&(d.value=o.orderLimitPrice);var p=new Ue(d).render();u.appendChild(p),i&&u.appendChild(i)}return t&&s&&(t.textContent=s),r===ct.MARKET?(e.classList.add("D(n)"),e.classList.add("Mih(a)!"),e.classList.add("M(0)!"),e.classList.add("H(0)!")):(e.classList.remove("D(n)"),e.classList.remove("Mih(a)!"),e.classList.remove("M(0)!"),e.classList.remove("H(0)!")),u}}},{key:"renderErrorNotification",value:function(){var e=this.container.querySelector('[data-id="'.concat(ot,'"]'));if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var t=this.state.errorData;e.appendChild(ne({className:"Mx(15px) Mb(15px)",shortMessage:t&&t.shortMessage,longMessages:t&&t.longMessages}))}}},{key:"renderQuotePrice",value:function(e,t){var n=t||this.container.querySelector('[data-id="'.concat(Xe,'"]'));if(n)if(e){var r=e.regularMarketPrice?e.regularMarketPrice.fmt:"N/A",o=e.regularMarketChange?e.regularMarketChange.fmt:"",a=e.regularMarketChangePercent?e.regularMarketChangePercent.fmt:"",i="",s="C(black)";o>0?(i="+",s="C($dataGreen)"):o<0&&(i="",s="C($dataRed)"),n.innerHTML='\n                <span class="Fw(b)">'.concat(r,'</span>\n                <span class="Mstart(10px) ').concat(s,'">').concat(i).concat(o," (").concat(i).concat(a,')</span>\n                <div class="C($gray-6) Fw(n) Fz(xs)">\n                    ').concat(E({id:"PRICE_NOTICE"},{exchange:e.fullExchangeName,currency:e.currency,time:e.regularMarketTime.fmt}),"\n                </div>\n            ")}else n.textContent="N/A"}},{key:"renderPowerInfo",value:function(e,t,n,r){var o=this.state.symbol,a=r||this.container.querySelector('[data-id="'.concat(rt,'"]'));if(a){if(t)if(e){var i=t.buyingPower,s=t.marginCash;if(i){var c=E({id:"BUYING_POWER"},{amount:i,currency:n&&n.accountBaseCurrency});s&&(c+=" | "+E({id:"MARGIN_CASH"},{amount:i,currency:n&&n.accountBaseCurrency})),a.className="Fz(xs) C($gray-6) Fw(n) Mb(4px)--mobp Mb(4px)--mobl",a.textContent=c}}else{if(t.positions){for(var u=0,l=t.positions,d=0;d<l.length;d++)if(l[d].symbol===o){u=l[d].quantity||0;break}var p=E({id:"STOCKS_OWNED"},{amount:u});a.className="Fz(xs) C($gray-6) Mt(4px) Fw(n)",a.textContent=p}}return a}}},{key:"renderTradeField",value:function(e,t,n){var r=this.state,o=r.orderData,a=r.action,i=r.tradeData,s=r.orderPriceType,c=r.tradingUIState,u=r.accountData,l=document.createElement("div");l.className="Mb(10px) Mih(45px) Mih(25px)--mobp Mih(25px)--mobl BdB--mobp Bdbc($grey-2)--mobp BdB--mobl Bdbc($grey-2)--mobl Mb(20px)--mobp Mb(20px)--mobl ";var p=document.createElement("div"),h=document.createElement("div"),m="",f=null;switch(e){case"price":m=E({id:"STOCK_PRICE"}),(f=document.createElement("div")).setAttribute("data-id",Xe),f.className="D(ib) Fw(b) Fz(s) Ta(start) Ta(end)--mobp Ta(end)--mobl Mih(35px)",this.renderQuotePrice(this.state.quoteData,f);break;case"accountNumber":if(i.accounts&&i.accounts.length>0){m=E({id:"BROKERAGE_ACCOUNT"}),f=document.createElement("div");var b=document.createElement("div");b.className="D(ib)",b.textContent=i.broker+" "+t.accountNumber,f.appendChild(b);var y=document.createElement("button");y.className="Mstart(5px) Bd(0) P(0) M(0) Fz(xs) Fw(500) C($c-fuji-blue-1-b) Bgc(white) Lh(1.79) Cur(p) Td(n) Td(u):h",y.setAttribute("data-ylk",v({slk:"change-acc",itc:1,elm:"btn",elmt:"ct"})),y.setAttribute("type","button"),y.addEventListener("click",this.state.onAccountChange),y.textContent=E({id:"CHANGE"}),f.appendChild(y);var T=document.createElement("div");T.className="Fz(xs) C($gray-6) Mt(4px) Fw(n)",T.setAttribute("data-id",rt),f.appendChild(this.renderPowerInfo(!!d[a],u,t,T))}break;case"orderAction":n&&n.actions&&(m=E({id:"ACTION"}),f=new Le({id:$e,options:n.actions,selected:a,i13nModel:{slk:"ordr-act-chng",_p:2,itc:1,elm:"inpt",elmt:"fltr"},onChange:this.onActionChange}).render());break;case"orderQuantity":m=E({id:"NO_OF_SHARES"});var g="";o&&o.orderDetails&&o.orderDetails.orderQuantity?g=o.orderDetails.orderQuantity:isNaN(this.state.noOfShares)||(g=this.state.noOfShares);var C={id:Qe,placeholder:m,className:"W(185px) Ta(end)--mobp Ta(end)--mobl",onInput:this.onOrderQuantityInput,autofocus:!0,required:!0,errorMessage:E({id:"ERR_INVALID_SHARES"})};g&&(C.value=g),(f=document.createElement("div")).appendChild(new Ue(C).render());break;case"orderPriceType":n&&n.priceTypes&&(m=E({id:"ORDER_TYPE"}),f=new Le({id:ze,options:n.priceTypes,selected:s,i13nModel:{slk:"ordr-prc-chng",_p:3,itc:1,elm:"inpt",elmt:"fltr"},onChange:this.onPriceTypeChange}).render());break;case"orderPriceTypeInput":p.setAttribute("data-id",et),l.setAttribute("data-id",tt),h.setAttribute("data-id",nt),f=this.renderLimitStopInputs(l,p);break;case"orderExpiration":n&&n.expirationTypes&&(m=E({id:"EXPIRATION"}),f=new Le({options:n.expirationTypes,selected:c.orderExpiration,id:Ye,i13nModel:{slk:"ordr-exp-chng",_p:4,itc:1,elm:"inpt",elmt:"fltr"}}).render());break;case"userDisabledMargin":if(t)if(t.userCanDisableMargin){m=E({id:"TYPE"});var O=[{displayLabel:E({id:"MARGIN"}),value:"false"},{displayLabel:E({id:"CASH"}),value:"true"}];f=new Le({options:O,id:Ve,i13nModel:{slk:"ordr-mar-csh-chng",_p:5,itc:1,elm:"inpt",elmt:"fltr"}}).render()}break;case"cost":if(t){var _;if(m=E({id:d[a]?"ESTIMATED_ORDER_COST":"ESTIMATED_ORDER_PROCEEDS"}),this.state.orderPriceType===ct.LIMIT||this.state.orderPriceType===ct.STOP_LIMIT)_=this.state.priceInput;else{var N=this.state.quoteData;_=N&&N.regularMarketPrice&&N.regularMarketPrice.raw||""}(f=document.createElement("div")).setAttribute("data-id",it),f.textContent="N/A",f.innerHTML="\n                        <span>\n                            ".concat(""===_?"N/A":S(_*this.state.noOfShares),'\n                        </span>\n                        <span class="Fz(xs) Mstart(2px) C($grey-1)">\n                            ').concat(t.accountBaseCurrency,"\n                        </span>\n                    ")}}return f?(p.className="D(ib) Va(m) W(30%) W(35%)--mobp W(35%)--mobl Fl(start) Fw(500) Ta(start)",h.className="D(ib) Va(m) Fw(b) W(70%) W(65%)--mobp W(65%)--mobl Ta(start) Ta(end)--mobp Ta(end)--mobl",p.textContent=m||p.textContent||"",l.appendChild(p),h.appendChild(f),l.appendChild(h),l):(l.className="",l)}},{key:"renderTradeFields",value:function(){var e,t=this,n=this.state,r=n.action,o=n.tradeData,a=n.selectedAccountIndex,i=n.quoteType;e=d[r]?qe:Ke;var s=o.accounts[a],c={};if(s)for(var l=s.orderCapabilities,p=0;p<l.length;p++)if(l[p].instrument===u[i]){c=l[p];break}var h=document.createElement("button");h.className="Bgc($c-fuji-blue-1-b) C(white) Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(250px) Miw(200px)--mobp Miw(200px)--mobl Mb(15px) Mt(10px)",h.setAttribute("type","submit"),h.setAttribute("data-ylk",v({slk:"review-order",itc:1,elm:"btn",elmt:"ct",outcm:"sbmt"})),h.setAttribute("data-id",at),h.textContent=E({id:"REVIEW_ORDER"}),this.state.invalidPrice||this.state.invalidShares||this.state.invalidSecPrice?(h.className+=" Op(0.3)",h.setAttribute("disabled","true")):h.className+=" Cur(p) Bgc($actionBlueHover):h";var m=document.createElement("form");return m.className="Mx(20px)--mobp Mx(50px)",m.addEventListener("submit",this.onReviewOrder),e.forEach(function(e){m.appendChild(t.renderTradeField(e,s,c))}),m.appendChild(h),m}},{key:"render",value:function(){var e=this.state,t=e.action,n=e.symbol,r=e.companyName,o=e.type,a=e.orderData,i=e.requestPending,s=e.selectedPfId,c="",u=document.createElement("div");u.className="Pos(r)";var l=document.createElement("div");if(l.setAttribute("data-id",ot),o===st.ORDER){u.className="Ta(start)",c=E({id:d[t]?"BUY_SHARES_TITLE":"SELL_SHARES_TITLE"},{ticker:n,companyName:r});var p=document.createElement("h2");p.className="Fz(l) Pb(20px) Pt(30px) Pt(20px)--mobp M(0) Mstart(50px) Mstart(20px)--mobp W($tradeHeaderWidth)",p.textContent=c,u.appendChild(p),u.appendChild(l),u.appendChild(this.renderTradeFields()),i&&this.init()}else if(o===st.REVIEW){u.className="Ta(start)",c=E({id:"REVIEW_ORDER_TITLE"});var h=document.createElement("h2");h.className="Fz(l) Pb(20px) Pt(30px) Pt(20px)--mobp M(0) Mstart(50px) Mstart(20px)--mobp W($tradeHeaderWidth)",h.textContent=c,u.appendChild(h),u.appendChild(l),u.appendChild(new Ae({orderData:a,onOrderSubmit:this.onOrderSubmit,onOrderEdit:this.onOrderEdit}).render())}else o===st.CONFIRM&&(u.className="",u.appendChild(V({title:E({id:"ORDER_SUBMITTED"}),message:a.confirmation.confirmationMessage,btnText:E({id:"VIEW_ORDER_STATUS"}),onClick:this.onViewOrderStatus,btnModel:{slk:"view-order",elm:"btn",elmt:"ct",itc:1},showPf:!0,pfId:s})));this.container.appendChild(u)}}])&&je(n.prototype,r),o&&je(n,o),t}(),lt="https://ad.apps.fm/DHmsz3uwrFXTDDC94Up15zJKSSMlbBumkkJBKX5nB5RROvAbu6A0-xxER_UatzBtBa-J_H5dTDolzpH9UAV8sw?pt=9029&ct=hpstream-s02-c1&mt=8",dt="https://ad.apps.fm/AMOFKM0hbh2EM6CizuwI-q5px440Px0vtrw1ww5B54xSzSHhTNUImKmzUwCLzlXepVXVDZ0weLobUMbVKbBd-zhofHIgL5pVs8IngJ8B8Uk?referrer=utm_source%3Dyahoo%26utm_medium%3Dbanner%26utm_campaign%3Dhpstream-s02-c1";var pt=function(e){var t=e.onNewBrokerLink,n=e.onExit,r=e.showPromo,o=document.createElement("div");o.className="Maw(530px) Ta(c) M(a) Pt(30px) Px(20px) Mb(5px) Mb(30px)--mobp Mb(30px)--mobl",o.innerHTML='\n        <div>\n            <h2 class="IbBox Mt(0px) Mb(15px)">\n                '.concat(E({id:"LINK_BROKER_WELCOME_TITLE"}),'\n            </h2>\n            <img src="').concat("https://s.yimg.com/uc/New.png",'" class="H(13px) W(25px) Mstart(5px) D(ib) Va(m)" alt="New"/>\n        </div>\n    ');var a=v({itc:1,elm:"itm",elmt:"link"}),i=document.createElement("div");i.innerHTML='\n        <p class="Mt(10px) Mb(5px) P(0)">'.concat(E({id:"LINK_BROKER_WELCOME_MSG"}),'</p>\n        <p class="M(0) P(0)">\n            <span>').concat(E({id:"NEVER_STORE_MSG"}),'</span>\n            <a\n                href="').concat("https://help.yahoo.com/kb/sln28346.html",'"\n                class="C($c-fuji-blue-1-b) Td(n) Cur(p) Mstart(5px) Td(u):h"\n                target="_blank"\n                rel="noopener"\n                data-ylk="').concat(a,'"\n            >\n                ').concat(E({id:"LEARN_MORE"}),'\n            </a>\n        </p>\n        <p class="Mt(15px) Mb(0px) P(0) ').concat(r?"D(n)--mobp D(n)--mobl":"",'">\n            ').concat(E({id:"DISCLAIMER_MSG"})," ",'\n            <a\n                class="C($c-fuji-blue-1-b) Td(n) Cur(p) Mstart(5px) Td(u):h"\n                href="').concat("https://help.yahoo.com/kb/finance-for-desktop/SLN2310.html?impressions=true",'"\n                target="_blank"\n                rel="noopener"\n                data-ylk="').concat(a,'"\n            >\n                ').concat(E({id:"YAHOO_PRIVACY_POLICY"}),"\n            </a>"," ","and"," ",'<a\n                class="C($c-fuji-blue-1-b) Td(n) Cur(p) Mstart(5px) Td(u):h"\n                href="').concat("https://policies.yahoo.com/us/en/yahoo/terms/utos/index.htm",'"\n                target="_blank"\n                rel="noopener"\n                data-ylk="').concat(a,'"\n            >\n                ').concat(E({id:"TERMS"}),"\n            </a>\n        </p>\n    ");var s=document.createElement("button");s.className="Bgc($c-fuji-blue-1-b) C(white) Bgc($actionBlueHover):h Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) Whs(nw) Miw(190px) Cur(p) D(b) M(a) Ta(c) Mt(15px)",s.setAttribute("data-ylk",v({slk:"link-broker",itc:1,elm:"btn",elmt:"ct"})),s.addEventListener("click",t),s.textContent=E({id:"CONTINUE"}),i.appendChild(s);var c=document.createElement("button");if(c.className="Bd(0) P(0) M(0) Fz(s) Fw(500) Bgc(white) C($c-fuji-blue-1-b) Cur(p) Td(n) Td(u):h M(a) Mt(10px)",c.setAttribute("data-ylk",v({slk:"maybe-later",itc:1,elm:"btn",elmt:"ct"})),c.textContent=E({id:"MAYBE_LATER"}),c.addEventListener("click",n),r){c.className+=" D(b)--mobp D(b)--mobl",s.className+=" D(b) D(n)--mobp D(n)--mobl";var u=function(){var e=navigator.userAgent||navigator.vendor||window.opera;if(e)return/android/i.test(e)?dt:(/iPad|iPhone|iPod/.test(e)&&window.MSStream,lt)}();if(u){var l=document.createElement("a");l.className="Bgc($c-fuji-blue-1-b) C(white) Td(n) Fw(500) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) Whs(nw) Miw(190px) M(a) Ta(c) Mt(15px) D(n) D(ib)--mobp D(ib)--mobl",l.setAttribute("data-ylk",v({slk:"trd-dwn-app",itc:0,elm:"btn",elmt:"link"})),l.setAttribute("target","_blank"),l.setAttribute("rel","noopener"),l.setAttribute("href",u),l.textContent=E({id:"GET_FINANCE_APP"}),i.appendChild(l)}}else c.className+=" D(b)";i.appendChild(c);var d=document.createElement("img");d.className="W(100%) Mt(20px) D(n)--mobp D(n)--mobl",d.setAttribute("src","https://s.yimg.com/uc/fin/img/-g-Group%203@2x.png"),d.setAttribute("alt","Preview Image");var p=document.createElement("img");return p.className="W(80%) Mt(0px) D(n) D(i)--mobp D(i)--mobl Mt(30px)--mobp Mt(20px)--mobl",p.setAttribute("src","https://s.yimg.com/uc/fin/img/Group2@2x.png"),p.setAttribute("alt","Preview Image"),i.appendChild(d),i.appendChild(p),o.appendChild(i),o};function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={error:t.error,linkedAccounts:t.linkedAccounts,onNewBrokerLink:t.onNewBrokerLink||Function.prototype,onBrokerSelect:t.onBrokerSelect||Function.prototype,onExit:t.onExit||Function.prototype}}var t,n,r;return t=e,(n=[{key:"renderLinkedAccounts",value:function(e){var t=this.state.onBrokerSelect,n=document.createElement("div"),r=document.createElement("h3");r.className="Fz(s) Mt(0px) Mb(10px) Ta(start) C($grey-3)",r.textContent=E({id:"LINKED_BROKER_ACCOUNTS"}),n.appendChild(r);var o=document.createElement("ul");o.className="Py(0) Px(2px) M(0) List(n)",e.forEach(function(e){var n=document.createElement("li");n.className="M(0) Mb(10px)",n.appendChild(ve({brokerObj:{shortName:e.broker,longName:e.brokerLongName,logos:[],accountInfo:e},type:"login",onBrokerSelect:t})),o.appendChild(n)}),n.appendChild(o);var a=document.createElement("button");return a.className="Bgc(white) C($c-fuji-blue-1-b) C($actionBlueHover):h Fw(b) Px(20px) Py(9px) Bdrs(2px) Bd(0) Fz(s) Whs(nw) Miw(110px) Cur(p) Mt(10px)",a.setAttribute("data-ylk",v({slk:"link-broker",itc:1,elm:"btn",elmt:"ct"})),a.addEventListener("click",this.state.onNewBrokerLink),a.textContent=E({id:"LINK_ANOTHER_BROKER"}),n.appendChild(a),n}},{key:"render",value:function(){var e=this.state,t=e.linkedAccounts,n=e.error,r=e.onNewBrokerLink,o=e.onExit;if(0===t.length)return pt({onNewBrokerLink:r,onExit:o,showPromo:!1});var a=document.createElement("div");return a.className="Maw(530px) Ta(c) M(a) Pt(30px) Pt(20px)--mobp Pt(20px)--mobl Px(20px) Mb(5px) Mb(30px)--mobp Mb(30px)--mobl",a.innerHTML='\n            <div>\n                <h2 class="IbBox Mt(0px) Mb(15px)">\n                    '.concat(E({id:"SELECT_ACCOUNT_TRADING"}),"\n                </h2>\n            </div>\n        "),a.appendChild(ne({className:"Mb(15px)",shortMessage:n&&n.shortMessage,longMessages:n&&n.longMessages})),a.appendChild(this.renderLinkedAccounts(t)),a}}])&&ht(t.prototype,n),r&&ht(t,r),e}(),ft=n(22),bt=n.n(ft),yt=n(23),Et=n.n(yt);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _t=["PENDING","OPEN","GROUP_OPEN","PART_FILLED","FILLED","GROUP_CLOSED","PENDING_CANCEL","OTHERS"],St={CANCELED:!0,REJECTED:!0,EXPIRED:!0,NOT_FOUND:!0,UNKNOWN:!0},Nt={PENDING:!0,OPEN:!0,PART_FILLED:!0,PENDING_CANCEL:!0,GROUP_OPEN:!0},It="exp-cont",At="clps-cont",kt="btn-error",Rt="N/A",xt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=gt(t).call(this))||"object"!==vt(o)&&"function"!=typeof o?Ct(r):o).container=e.container,n.state={authToken:e.authToken,accountNumber:e.accountNumber,orderData:e.orderData,isExpanded:void 0!==e.isExpanded&&e.isExpanded,longName:e.longName,accountBaseCurrency:e.accountBaseCurrency||"USD",onCancelOrder:e.onCancelOrder||Function.prototype},n.onOrderToggle=n.onOrderToggle.bind(Ct(n)),n.onAllOrderToggle=n.onAllOrderToggle.bind(Ct(n)),n.onCancelOrder=n.onCancelOrder.bind(Ct(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,P),n=t,(r=[{key:"onOrderToggle",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-expanded"),r=!("true"===n||!0===n);t.setAttribute("data-ylk",v({slk:"toggle-order",itc:1,elm:"inpt",elmt:r?"less":"more",rspns:r?"clps":"xpnd"})),t.setAttribute("data-expanded",r);for(var o=t.parentElement.parentElement,a=o&&o.querySelectorAll('[data-id="'.concat(It,'"]')),i=0;i<a.length;i++){a[i].style.maxHeight=r?"400px":0}t.querySelector("svg").style.transform=r?"rotate(90deg)":"rotate(0)"}},{key:"onAllOrderToggle",value:function(){this.setState({isExpanded:!this.state.isExpanded})}},{key:"onCancelOrder",value:function(e){var t=this.state,n=t.onCancelOrder,r=t.longName,o=t.accountBaseCurrency,a=t.authToken,i=t.accountNumber,c=e.currentTarget,u=c.getAttribute("data-order");u&&w({url:s.CANCEL_ORDER,method:"POST",body:{orderNumber:u,token:a,accountNumber:i},headers:[{name:"Content-Type",value:"application/json"}]},function(e,t){if(e||!t||"ERROR"===t.status){var s=c.parentElement.querySelector('[data-id="'.concat(kt,'"]'));s&&(s.style.display="block",setTimeout(function(){s.style.display="none"},8e3))}else n({accountNumber:i,token:a,longName:r,accountBaseCurrency:o})})}},{key:"renderCollapsedView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.state.accountBaseCurrency,r=e.orderLegs[0],o=void 0!==r.action?r.action:e.action,a=void 0!==r.symbol?r.symbol:e.symbol,i=void 0!==r.priceInfo?r.priceInfo:e.priceInfo,s=void 0!==r.orderedQuantity?r.orderedQuantity:e.orderedQuantity,c="UNKNOWN"!==o?E({id:"ORDER_ACTION_"+o}):"",u="";"TRAILING_STOP_DOLLAR"!==i.type&&"TRAILING_STOP_PRCT"!==i.type||(u=E({id:d[o]?"ORDER_TRAILING_BUY_ACTION":"ORDER_TRAILING_SELL_ACTION"},{amount:i.trailPrice}));var l="";"UNKNOWN"!==i.type&&"NET_DEBIT"!==i.type&&(l=E({id:"ORDER_MSG_"+i.type},{action:c,quantity:s,limitPrice:i.limitPrice,currency:n,stopPrice:i.stopPrice,trailingAction:u}));for(var p=0,h=0,m=0;m<r.fills.length;m++){var f=r.fills[m],b=f.price,y=f.quantity;p+=b*y,h+=y}var v=p/h,T=isNaN(v)?Rt:v*s,g=document.createElement("div");return g.className=t,g.setAttribute("data-id",At),g.innerHTML='\n            <div>\n                <h5 class="D(ib) M(0) Mb(2px) Fw(500) Fz(14px)">'.concat(a," - ").concat(E({id:i.type})," ").concat(E({id:o}),"</h5>\n                ").concat(T!==Rt?'<div class="D(ib) Fl(end)"><span class="Fw(b) Fz(m)">'.concat(T,"</span> ").concat(n,"</div>"):"",'\n            </div>\n            <div>\n                <div class="D(ib) C($gray-6)">\n                    ').concat(l,"\n                </div>\n            </div>\n        "),g}},{key:"renderExpandedView",value:function(e,t,n){var r=this.state,o=r.isExpanded,a=r.accountBaseCurrency,i=e.orderLegs[0];t=t||{};for(var s=o?"400px":0,c=void 0!==i.orderedQuantity?i.orderedQuantity:e.orderedQuantity,u=void 0!==i.filledQuantity?i.filledQuantity:e.filledQuantity,l=void 0!==i.priceInfo?i.priceInfo:e.priceInfo,d=[],p=0;p<i.fills.length;p++){var h=i.fills[p];d[p]='\n                <div class="Mb(6px)">\n                    <span class="Fw(500) Mend(5px) Mend(0px)--mobp D(b)--mobp">\n                        '.concat(E({id:"UNIT_PRICE_MSG"},{quantity:h.quantity,price:h.price,currency:a}),'\n                    </span>\n                    <span class="C($gray-6)">').concat(h.timestamp,"</span>\n                </div>\n            ")}var m={left:[{displayLabel:E({id:"ORDER_NUMBER"}),value:e.orderNumber},{displayLabel:E({id:"TYPE"}),value:E({id:e.orderType})},{displayLabel:E({id:"EXPIRATION"}),value:E({id:e.orderExpiration})},{displayLabel:E({id:"ORDERED_QUANTITY"}),value:c}],right:[{displayLabel:E({id:"LIMIT_PRICE"}),value:void 0!==l.limitPrice?l.limitPrice:Rt},{displayLabel:E({id:"STOP_PRICE"}),value:void 0!==l.stopPrice?l.stopPrice:Rt},{displayLabel:E({id:"TRAIL_PRICE"}),value:void 0!==l.trailPrice?l.trailPrice:Rt},{displayLabel:E({id:"FILLED_QUANTITY"}),value:u}]};t.groupOrderId&&m.right.push({displayLabel:E({id:"GROUP_ORDER_ID"}),value:E({id:t.groupOrderId})}),t.groupOrderType&&m.left.push({displayLabel:E({id:"GROUP_ORDER_TYPE"}),value:E({id:t.groupOrderType})});var f=document.createElement("div");return f.className="Whs(nw) Ov(h) Trsdu(300ms) Trsp(a)",f.setAttribute("data-id",It),f.style.maxHeight=s,f.innerHTML='\n            <div class="'.concat(n||"BdT Bdtc($grey-2) Pt(10px) Mt(10px)",'">\n                ').concat(Object.keys(m).map(function(e){return'\n                            <div class="D(ib) Va(t) D(b)--mobp W(50%) W(100%)--mobp">\n                                <table class="W(100%) Whs(n)">\n                                    <tbody>\n                                        '.concat(m[e].map(function(e){return'\n                                                    <tr>\n                                                        <td class="Pb(6px) C($gray-6)">'.concat(e.displayLabel,'</td>\n                                                        <td class="Fw(500) Pb(6px) Ta(start) Ta(end)--mobp">').concat(e.value,"</td>\n                                                    </tr>\n                                                ")}).join(""),"\n                                    </tbody>\n                                </table>\n                            </div>\n                        ")}).join(""),"\n                ").concat(d.length>0?'\n                        <div class="Mstart(4px)">\n                            <div class="C($gray-6)">'.concat(E({id:"FILLED_EXECUTION"}),"</div>\n                            <div>").concat(d,"</div>\n                        </div>   \n                    "):"","\n            </div>\n        "),f}},{key:"renderOrderItem",value:function(e){var t=this,n=this.state.isExpanded,r=document.createElement("div");r.className="BdB Bdbc($grey-2) Bdrs(2px) Py(15px)";var o=document.createElement("div");o.className="IbBox W(32px)";var a=document.createElement("button");a.className="Bgc(white) C($c-fuji-blue-1-b) C($actionBlueHover):h Fw(500) Py(0) Px(4px) Bd(0) Cur(p) Fz(s) ordToggleBtn",a.setAttribute("data-expanded",n),a.setAttribute("data-ylk",v({slk:"toggle-order",itc:1,elm:"btn",elmt:"more",rspns:n?"clps":"xpnd"})),a.addEventListener("click",this.onOrderToggle),a.appendChild(new H({className:"W(24px) H(24px) Va(m) Trsdu(300ms) Fill($c-fuji-blue-1-b) Stk($c-fuji-blue-1-b) ordToggleBtn:h_Fill($actionBlueHover) ordToggleBtn:h_Stk($actionBlueHover)",icon:bt.a,width:20,height:20,style:n?"transform: rotate(90deg);":"transform: rotate(0)"}).render()),o.appendChild(a),r.appendChild(o);var i=document.createElement("div");i.className="IbBox W(70%) W(65%)--mobp",r.appendChild(i);var s=document.createElement("div");if(s.className="IbBox W(20%) Ta(end)",Nt[e.orderStatus]){var c=document.createElement("button");c.className="Bgc(white) Bgc($actionRedHover):h C(white):h C(black) Bd Bdc(black) Bdc(t):h Bdrs(2px) Cur(p) Fz(s) Fz(xs)--mobp Fw(500) Px(10px) Py(6px) Miw(80px) Miw(a)--mobp",c.setAttribute("data-ylk",v({slk:"cancel-order",itc:1,elm:"btn",elmt:"cl"})),c.setAttribute("data-order",e.orderNumber),c.textContent=E({id:"CANCEL"}),c.addEventListener("click",this.onCancelOrder),s.appendChild(c);var u=document.createElement("div");u.className="Mt(5px) C($dataRed)",u.style.display="none",u.setAttribute("data-id",kt),u.textContent=E({id:"CANCEL_ORDER_FAILED"}),s.appendChild(u)}else{var l=document.createElement("span");l.textContent=E({id:e.orderStatus}),s.appendChild(l)}r.appendChild(s);var d=e.groupOrders;return d.length>0?d.forEach(function(n,r){i.appendChild(t.renderCollapsedView(n,r!==d.length-1?"Mb(5px) Pb(5px) BdB Bdbc($grey-2)":"")),i.appendChild(t.renderExpandedView(n,{groupOrderType:e.groupOrderType,groupOrderId:e.groupOrderId},r!==d.length-1?"BdB Bdbc($grey-2) Mb(5px) Py(10px) Py(5px)--mobp":null))}):(i.appendChild(this.renderCollapsedView(e)),i.appendChild(this.renderExpandedView(e))),r}},{key:"render",value:function(){for(var e=this,t=this.state,n=t.orderData,r=t.longName,o=t.isExpanded,a=n.orderStatusDetailsList,i={OTHERS:[]},s=0;s<a.length;s++){var c=a[s],u=c.orderStatus;St[u]?i.OTHERS.push(c):(i[u]||(i[u]=[]),i[u].push(c))}var l=document.createElement("div");l.className="Maw(600px) Mx(a) Ta(start) Pos(r) Px(20px) Pt(30px) Pt(20px)--mobp Pt(20px)--mobl Pb(15px)";var d=document.createElement("h2");d.className="D(ib) M(0) Fz(l) Maw($orderHeaderWidth) Va(t)",d.textContent=E({id:"ALL_ORDERS"},{broker:r,account:n.accountNumber}),l.appendChild(d);var p=document.createElement("button");p.className="Va(t) Bgc(white) C($c-fuji-blue-1-b) C($actionBlueHover):h Fw(500) P(0) Bd(0) Fz(s) D(ib) Whs(nw) Cur(p) Fl(end) M(0) toggleBtn",p.setAttribute("data-ylk",v({slk:"exp-col-all",elm:"btn",elmt:o?"less":"more",rspns:o?"clps":"xpnd",itc:1})),p.addEventListener("click",this.onAllOrderToggle),p.appendChild(new H({className:"W(20px) H(20px) Va(m) Trsdu(200ms) Rotate(90deg) Fill($c-fuji-blue-1-b) Stk($c-fuji-blue-1-b) toggleBtn:h_Fill($actionBlueHover) toggleBtn:h_Stk($actionBlueHover)",icon:Et.a,width:20,height:20}).render());var h=document.createElement("span");h.className="Va(m)",h.textContent=E({id:"EXPAND_COLLAPSE"}),p.appendChild(h),l.appendChild(p);var m=document.createElement("div");m.className="Mt(15px)",_t.forEach(function(t){if(i[t]&&0!==i[t].length){var n=document.createElement("h3");n.className="M(0) Mb(10px) Fz(m)",n.textContent=E({id:t})+" "+E({id:"ORDERS"});var r=document.createElement("div");r.className="Mb(25px) BdT Bdtc($grey-2)",i[t].forEach(function(t){r.appendChild(e.renderOrderItem(t))}),m.appendChild(n),m.appendChild(r)}}),l.appendChild(m),this.container.appendChild(l)}}])&&Tt(n.prototype,r),o&&Tt(n,o),t}();n(56);function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Mt={AUTHENTICATE:"authenticate",ERROR:"error",LIST_LINKED_ACCOUNTS:"list-linked-accounts",LIST_BROKERS:"list-brokers",LINK_BROKER:"link-broker",TRADE:"trade",SECURITY_QUESTION:"security-question",UNLINK_ACCOUNT:"unlink-account",VIEW_ORDER:"view-order",VIEW_PROMO:"view-promo"},Pt={error:!0,"list-linked-accounts":!0,"list-brokers":!0,"view-order":!0,"view-promo":!0,"unlink-account":!0,trade:!0};function Lt(){window&&window.YFinTradeit&&window.YFinTradeit.store&&(window.YFinTradeit.store=null)}var Dt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id||"fin-trade-it",this.container=t.container,this.useDummy=t.useDummy||!1,this.state={action:t.action||"buy",state:t.state||Mt.LIST_LINKED_ACCOUNTS,stackTrace:[],guid:t.guid||"",currentStateData:t.currentStateData||{},previousStateData:{},symbol:t.symbol||"",companyName:t.companyName||"",quoteType:t.quoteType||"EQUITY",onAuthenticate:t.onAuthenticate,onCloseSession:t.onCloseSession,onAccountLink:t.onAccountLink,onExit:t.onExit,currentPageIndex:0},this.state.stackTrace.push(this.state.state),this.onBrokerSelect=this.onBrokerSelect.bind(this),this.onNewBrokerLink=this.onNewBrokerLink.bind(this),this.onAuthenticate=this.onAuthenticate.bind(this),this.onError=this.onError.bind(this),this.onViewOrder=this.onViewOrder.bind(this),T().setContext({container:this.container,lang:t.lang||"en-US",region:t.region||"US",crumb:t.crumb||"",guid:t.guid||"",onBeacon:"function"==typeof t.onBeacon?t.onBeacon:Function.prototype,rapidSec:t.rapidSec}),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.container.id=y,C()}},{key:"destroy",value:function(){Lt()}},{key:"setState",value:function(e,t,n){this.state.stackTrace.push(e),this.state=Object.assign({},this.state,{state:e,currentStateData:t||{},currentPageIndex:this.state.currentPageIndex+1});var r=this.container.querySelector('[data-id="'.concat(l.TRADEIT_FOOTER,'"]'));r&&(Pt[e]?(r.classList.add("D(n)--mobp"),r.classList.add("D(n)--mobl")):(r.classList.remove("D(n)--mobp"),r.classList.remove("D(n)--mobl"))),this.setStateContent(n)}},{key:"onBrokerSelect",value:function(e,t){var n=e.shortName,r=e.longName||n;switch(t){case"link":case"link-sp":this.setState(Mt.LINK_BROKER,{longName:r,shortName:n,userId:e.userId},n===f);break;case"login":var o=e.accountInfo||{},a=o.userId;T().setAuthData({shortName:n,longName:r,userId:a}),"NEEDS_OAUTHUPDATE"===(o.status&&o.status.actionToRefresh)?this.setState(Mt.LINK_BROKER,{longName:r,shortName:n,userId:a,type:"OAUTH_TOKEN_UPDATE"}):this.setState(Mt.AUTHENTICATE,{selectedAccountNumber:e.accountInfo&&e.accountInfo.accountNumber})}}},{key:"onNewBrokerLink",value:function(){this.setState(Mt.LIST_BROKERS,{})}},{key:"onAuthenticate",value:function(e){T().setAuthData({longName:e.longName,shortName:e.shortName,userId:e.userId,userToken:e.userToken}),this.setState(Mt.AUTHENTICATE)}},{key:"onViewOrder",value:function(e){this.setState(Mt.VIEW_ORDER,e)}},{key:"onError",value:function(e){this.setState(Mt.ERROR,e)}},{key:"setStateContent",value:function(e){var t=this,n=this.state,r=n.state,o=n.guid,a=n.currentStateData,i=n.quoteType,c=n.onExit,d=this.useDummy,p=this.container.querySelector('[data-id="'+l.TRADEIT_CONTENT+'"]');if(!e)for(;p.firstChild;)p.removeChild(p.firstChild);switch(r){case Mt.LIST_LINKED_ACCOUNTS:if(o){var h=T().getLinkedAccounts();h.length>0?(p.appendChild(new mt({linkedAccounts:h,onBrokerSelect:this.onBrokerSelect,onNewBrokerLink:this.onNewBrokerLink,onExit:c,error:a.error}).render()),C()):new G({container:p,request:{url:s.PORTFOLIO,query:{userId:o,fields:"quoteType"},method:"GET"},spinnerConfig:{title:E({id:"FETCHING_LINKED_ACCOUNTS"})},onSuccess:function(e){var n=g(e.finance.result[0].portfolios);T().setLinkedAccounts(n,{clear:!0});var r=new mt({linkedAccounts:n,onBrokerSelect:t.onBrokerSelect,onNewBrokerLink:t.onNewBrokerLink,onExit:t.state.onExit}).render();return C(),r},error:{heading:E({id:"SOMETHING_WENT_WRONG"}),message:E({id:"ERR_API_PORTFOLIO"})}}).render()}else this.setState(Mt.ERROR,{status:E({id:"INVALID_SESSION"}),message:E({id:"YAHOO_LOGIN_MSG"})});break;case Mt.LIST_BROKERS:var m=[{url:s.GET_BROKER_LIST,body:{},query:{fidelityPilot:"true"},method:"POST"}];0===T().getLinkedAccounts().length&&m.push({url:s.PORTFOLIO,query:{userId:o,fields:"quoteType"},method:"GET"}),new G({container:p,request:m,spinnerConfig:{title:E({id:"FETCHING_BROKER_LIST"})},onSuccess:function(e){e.length>1&&T().setLinkedAccounts(g(e[1].finance.result[0].portfolios),{clear:!0});var n=new Oe({linkedBrokers:T().getLinkedAccountsData(),brokerList:e[0].brokerList,onBrokerSelect:t.onBrokerSelect,useDummy:d}).render();return C(),n},error:{heading:E({id:"SOMETHING_WENT_WRONG"}),message:E({id:"ERR_API_GET_BROKER_LIST"})}}).render();break;case Mt.LINK_BROKER:pe({shortName:a.shortName,longName:a.longName,userId:a.userId,type:a.type,container:p,onAccountLink:this.state.onAccountLink},function(e){t.setState(Mt.TRADE,{tradeData:e.tradeData}),C()});break;case Mt.ERROR:p.innerHTML='\n                    <div class="Pt(30px) Pt(20px)--mobp Pt(20px)--mobl Px(20px)">\n                        <h2 class="Mb(15px)">'.concat(a.status,'</h2>\n                        <p class="Mih(68px)">').concat(a.message,"</p>\n                    </div>\n                "),C();break;case Mt.AUTHENTICATE:var f=T().getAuthData();a&&(["longName","userToken","shortName","userId"].forEach(function(e){a[e]&&(f[e]=a[e])}),T().setAuthData(f)),de({container:p,userId:f.userId,userToken:f.userToken,longName:f.longName,disableUIUpdate:!0},function(e){"function"==typeof t.state.onAuthenticate?t.state.onAuthenticate(e):function(e){var n=0;if(a.selectedAccountNumber)for(var r=0;r<e.accounts.length;r++)if(a.selectedAccountNumber===e.accounts[r].accountNumber){n=r;break}var o=!1,s=e.accounts[n]||{},c=s.orderCapabilities;if(c)for(var l=0;l<c.length;l++)if(c[l].instrument===u[i]){o=!0;break}o?t.setState(Mt.TRADE,{tradeData:e,selectedAccountIndex:n}):t.setState(Mt.LIST_LINKED_ACCOUNTS,{error:{shortMessage:E({id:"UNSUPPORTED_ACCOUNT"}),longMessages:[E({id:"UNSUPPORTED_ACCOUNT_MSG"},{broker:e.broker,accountName:s.name,instrument:E({id:"INSTR_QUOTETYPE_"+i})})]}})}(e),C()});break;case Mt.TRADE:new ut({container:p,action:this.state.action,selectedAccountIndex:a.selectedAccountIndex,tradeData:a.tradeData,symbol:this.state.symbol,companyName:this.state.companyName,quoteType:this.state.quoteType,onOrderReview:this.onOrderReview,onError:this.onError,onViewOrderStatus:this.onViewOrder,onAccountChange:function(){t.setState(Mt.LIST_LINKED_ACCOUNTS)}}).render(),C();break;case Mt.VIEW_ORDER:new G({container:p,request:{url:s.ALL_ORDER_STATUS,method:"POST",headers:[{name:"Content-Type",value:"application/json"}],body:{token:a.token,accountNumber:a.accountNumber}},spinnerConfig:{title:E({id:"FETCHING_ORDERS"})},success:{disableUIUpdate:!0},onSuccess:function(e){new xt({authToken:a.token,accountNumber:a.accountNumber,container:p,orderData:e,isExpanded:!1,longName:a.longName,accountBaseCurrency:a.accountBaseCurrency,onCancelOrder:t.onViewOrder}).render(),C()},error:{heading:E({id:"SOMETHING_WENT_WRONG"}),message:E({id:"ERR_API_ALL_ORDER_STATUS"})}}).render();break;case Mt.VIEW_PROMO:p.appendChild(pt({onNewBrokerLink:this.onNewBrokerLink,onExit:c,showPromo:void 0===a.showPromo||a.showPromo}));break;case Mt.UNLINK_ACCOUNT:new G({container:p,request:{url:s.OAUTH_TOKEN_DELETE,method:"POST",headers:[{name:"Content-Type",value:"application/json"}],body:{userId:a.userId}},spinnerConfig:{title:E({id:"UNLINKING_ACCOUNT"})},onSuccess:function(){var e=V({title:E({id:"UNLINK_ACCOUNT_SUCCESS"}),message:E({id:"UNLINK_ACCOUNT_SUCCESS_MSG"}),btnText:E({id:"CLOSE"}),btnModel:{slk:"close",itc:1,elm:"btn",elmt:"cl"},onClick:t.state.onCloseSession}),n=T().getAuthData();return _("tradeit-brk-uln",{slk:a.longName||n&&n.longName||"unknown",elm:"btn",elmt:"ct",itc:1},"acc-unlnkd"),C(),e},error:{enableRetry:!1,heading:E({id:"SOMETHING_WENT_WRONG"}),message:E({id:"ERR_API_CLOSE_SESSION"})}}).render()}}},{key:"render",value:function(){this.container.innerHTML='\n            <div class="Pos(a) W(100%) H(100%) T(0) Start(0) Bgc(white) Z(1)" data-id="'.concat(l.TRADEIT_MODAL,'" style="display:none;"></div>\n            <div class="Mih(200px) H(100%) Pos(r)--mobp Pos(r)--mobl">\n                <div class="Ta(c)" data-id="').concat(l.TRADEIT_CONTENT,'"></div>\n            </div>\n            ').concat(Ne({className:Pt[this.state.state]?"D(n)--mobp D(n)--mobl":""}),"\n        "),this.setStateContent()}}])&&wt(t.prototype,n),r&&wt(t,r),e}();window.YFinTradeit||(window.YFinTradeit={}),window.YFinTradeit.Tradeit=Dt,window.YFinTradeit.destroy=Lt;t.default=Dt}]);